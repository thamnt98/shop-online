{"ast":null,"code":"import _regeneratorRuntime from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/thamnt/Downloads/shop-online/front-end/admin/src/routes/Supplier/AddSuppliderPage/index.js\";\nimport React, { Component } from \"react\";\nimport { Form, Row, Col, Card, Input, Button, Cascader, notification } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport { getSupplier, getListShop, listPref, updateSupplier, createSupplier } from \"../../../service/handleRequest\";\nimport CircularProgress from \"components/CircularProgress/index\";\nimport '../../../styles/customerStyle/index.css';\n\nvar AddSupplierPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddSupplierPage, _Component);\n\n  function AddSupplierPage(props) {\n    var _this;\n\n    _classCallCheck(this, AddSupplierPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddSupplierPage).call(this, props));\n\n    _this.openNotificationWithIcon = function (type, message) {\n      notification[type]({\n        message: message\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      var id = _this.props.match.params.id;\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          var obj = {\n            supplier_code: values.supplierCode,\n            supplier_name: values.supplierName,\n            shop_id: values.shopName[0],\n            tel: values.tel,\n            zipcode: values.zipcode,\n            pref_id: values.pref_id[0],\n            ward: values.ward,\n            addr1: values.addr1,\n            addr2: values.addr2\n          };\n          if (!id) _this.doCreateSubmit(obj);else _this.doUpdateSubmit(obj, id);\n        }\n      });\n    };\n\n    _this.renderInitShop = function (value) {\n      if (!value) return [];\n      return [value];\n    };\n\n    _this.styleLoader = {\n      position: \"fixed\",\n      top: \"0\",\n      left: \"0\",\n      width: \"100%\",\n      \"z-index\": \"12\",\n      \"background-color\": \"#fff\"\n    };\n    _this.formItemLayout = {\n      labelCol: {\n        sm: {\n          span: 8\n        }\n      },\n      wrapperCol: {\n        sm: {\n          span: 16\n        }\n      }\n    };\n    _this.state = {\n      supplier: {\n        id: \"\",\n        supplierCode: \"\",\n        supplierName: \"\",\n        shopName: \"\",\n        tel: \"\",\n        zipcode: \"\",\n        pref_id: \"\",\n        ward: \"\",\n        addr1: \"\",\n        addr2: \"\"\n      },\n      shops: [],\n      prefs: [],\n      loader: true\n    };\n    return _this;\n  }\n\n  _createClass(AddSupplierPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var id = this.props.match.params.id;\n      getListShop.then(function (response) {\n        var shops = response.data.map(function (shop) {\n          return {\n            value: shop.id,\n            label: shop.shopName\n          };\n        });\n\n        _this2.setState({\n          shops: shops\n        });\n      }).catch(function (ex) {\n        _this2.openNotificationWithIcon(\"error\", \"Server error\");\n      });\n      listPref().then(function (response) {\n        var prefs = response.data.map(function (pref) {\n          return {\n            value: pref.id,\n            label: pref.name\n          };\n        });\n\n        _this2.setState({\n          prefs: prefs,\n          loader: false\n        });\n      });\n\n      if (!id) {\n        return;\n      }\n\n      getSupplier(id).then(function (response) {\n        var supplier = {\n          id: response.data.data.id,\n          supplierCode: response.data.data.attributes.supplierCode,\n          supplierName: response.data.data.attributes.supplierName,\n          shopName: response.data.data.attributes.shopId,\n          tel: response.data.data.attributes.tel,\n          zipcode: response.data.data.attributes.zipcode,\n          pref_id: response.data.data.attributes.pref_id,\n          ward: response.data.data.attributes.ward,\n          addr1: response.data.data.attributes.addr1,\n          addr2: response.data.data.attributes.addr2\n        };\n\n        _this2.setState({\n          supplier: supplier\n        });\n      }).catch(function (ex) {});\n    }\n  }, {\n    key: \"doCreateSubmit\",\n    value: function () {\n      var _doCreateSubmit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(obj) {\n        var _this3 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return createSupplier(obj).then(function (response) {\n                  _this3.openNotificationWithIcon(\"success\", \"Create rental success.\");\n\n                  _this3.props.history.replace(\"/suppliers\");\n                }).catch(function (ex) {\n                  if (ex.response && ex.response.status === 422) {\n                    if (ex.response.data.errors.rental_name[0]) _this3.openNotificationWithIcon(\"error\", \"Shop name is exist.\");\n                  } else {\n                    _this3.openNotificationWithIcon(\"error\", \"Server error\");\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function doCreateSubmit(_x) {\n        return _doCreateSubmit.apply(this, arguments);\n      }\n\n      return doCreateSubmit;\n    }()\n  }, {\n    key: \"doUpdateSubmit\",\n    value: function () {\n      var _doUpdateSubmit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(obj, id) {\n        var _this4 = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                updateSupplier(obj, id).then(function (response) {\n                  _this4.openNotificationWithIcon(\"success\", \"Update rental success.\");\n\n                  _this4.props.history.replace(\"/suppliers\");\n                }).catch(function (ex) {\n                  _this4.openNotificationWithIcon(\"error\", \"Server error\");\n                });\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function doUpdateSubmit(_x2, _x3) {\n        return _doUpdateSubmit.apply(this, arguments);\n      }\n\n      return doUpdateSubmit;\n    }()\n  }, {\n    key: \"renderTitleHeader\",\n    value: function renderTitleHeader() {\n      var id = this.props.match.params.id;\n      return id ? \"Update Supplier\" : \"Create Supplier\";\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      var _this$state = this.state,\n          supplier = _this$state.supplier,\n          shops = _this$state.shops,\n          prefs = _this$state.prefs,\n          loader = _this$state.loader;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, this.renderTitleHeader())), React.createElement(Row, {\n        type: \"flex\",\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 24,\n        className: \"pd-0 posi-rel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, loader ? React.createElement(\"div\", {\n        className: \"on-loader posi-absolute\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(CircularProgress, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      })) : null, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(Form, Object.assign({}, this.formItemLayout, {\n        onSubmit: this.handleSubmit,\n        className: \"form-shape\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }), React.createElement(Form.Item, {\n        label: \"Provider Code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, getFieldDecorator(\"supplierCode\", {\n        rules: [{\n          required: true,\n          message: \"Please input your Provider Code!\"\n        }],\n        initialValue: supplier.supplierCode\n      })(React.createElement(Input, {\n        placeholder: \"Provider Code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Provider Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, getFieldDecorator(\"supplierName\", {\n        rules: [{\n          required: true,\n          message: \"Please input your Provider Name!\"\n        }],\n        initialValue: supplier.supplierName\n      })(React.createElement(Input, {\n        placeholder: \"Provider Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Store Name Avaliable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, getFieldDecorator(\"shopName\", {\n        rules: [{\n          type: \"array\",\n          required: true,\n          message: \"Please select your Store Name Avaliable.\"\n        }],\n        initialValue: this.renderInitShop(supplier.shopName)\n      })(React.createElement(Cascader, {\n        options: shops,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Phone number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, getFieldDecorator(\"tel\", {\n        rules: [{\n          required: true,\n          message: \"Please input your Phone number!\"\n        }, {\n          pattern: new RegExp(\"^[0-9]*$\"),\n          message: \"Input Phone incorect.\"\n        }],\n        initialValue: supplier.tel\n      })(React.createElement(Input, {\n        placeholder: \"Phone number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Post code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, getFieldDecorator(\"zipcode\", {\n        initialValue: supplier.zipcode\n      })(React.createElement(Input, {\n        placeholder: \"Post code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"City\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, getFieldDecorator(\"pref_id\", {\n        rules: [{\n          type: \"array\",\n          required: true,\n          message: \"Please select your City.\"\n        }],\n        initialValue: this.renderInitShop(supplier.pref_id)\n      })(React.createElement(Cascader, {\n        options: prefs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"District\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, getFieldDecorator(\"ward\", {\n        initialValue: supplier.ward\n      })(React.createElement(Input, {\n        placeholder: \"District\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Town\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, getFieldDecorator(\"addr1\", {\n        initialValue: supplier.addr1\n      })(React.createElement(Input, {\n        placeholder: \"Town\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Detail address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, getFieldDecorator(\"addr2\", {\n        initialValue: supplier.addr2\n      })(React.createElement(Input, {\n        placeholder: \"Detail address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"dp-flex-jf-center dp-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, \"Save\"), React.createElement(Link, {\n        to: \"/suppliers\",\n        className: \"ant-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, \"Back\")))))));\n    }\n  }]);\n\n  return AddSupplierPage;\n}(Component);\n\nexport default Form.create()(AddSupplierPage);","map":{"version":3,"sources":["/Users/thamnt/Downloads/shop-online/front-end/admin/src/routes/Supplier/AddSuppliderPage/index.js"],"names":["React","Component","Form","Row","Col","Card","Input","Button","Cascader","notification","Link","getSupplier","getListShop","listPref","updateSupplier","createSupplier","CircularProgress","AddSupplierPage","props","openNotificationWithIcon","type","message","handleSubmit","e","id","match","params","preventDefault","form","validateFields","err","values","obj","supplier_code","supplierCode","supplier_name","supplierName","shop_id","shopName","tel","zipcode","pref_id","ward","addr1","addr2","doCreateSubmit","doUpdateSubmit","renderInitShop","value","styleLoader","position","top","left","width","formItemLayout","labelCol","sm","span","wrapperCol","state","supplier","shops","prefs","loader","then","response","data","map","shop","label","setState","catch","ex","pref","name","attributes","shopId","history","replace","status","errors","rental_name","getFieldDecorator","renderTitleHeader","rules","required","initialValue","pattern","RegExp","create"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SACEC,IADF,EAEEC,GAFF,EAGEC,GAHF,EAIEC,IAJF,EAKEC,KALF,EAMEC,MANF,EAOEC,QAPF,EAQEC,YARF,QASO,MATP;AAUA,SAASC,IAAT,QAAqB,kBAArB;AACA,SACEC,WADF,EAEEC,WAFF,EAGEC,QAHF,EAIEC,cAJF,EAKEC,cALF,QAMO,gCANP;AAOA,OAAOC,gBAAP,MAA6B,mCAA7B;AACA,OAAO,yCAAP;;IAEMC,e;;;;;AACJ,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,yFAAMA,KAAN;;AADiB,UAqBnBC,wBArBmB,GAqBQ,UAACC,IAAD,EAAOC,OAAP,EAAmB;AAC5CZ,MAAAA,YAAY,CAACW,IAAD,CAAZ,CAAmB;AACjBC,QAAAA,OAAO,EAAEA;AADQ,OAAnB;AAGD,KAzBkB;;AAAA,UAgFnBC,YAhFmB,GAgFJ,UAAAC,CAAC,EAAI;AAAA,UACVC,EADU,GACH,MAAKN,KAAL,CAAWO,KAAX,CAAiBC,MADd,CACVF,EADU;AAGlBD,MAAAA,CAAC,CAACI,cAAF;;AAEA,YAAKT,KAAL,CAAWU,IAAX,CAAgBC,cAAhB,CAA+B,UAACC,GAAD,EAAMC,MAAN,EAAiB;AAC9C,YAAI,CAACD,GAAL,EAAU;AACR,cAAME,GAAG,GAAG;AACVC,YAAAA,aAAa,EAAEF,MAAM,CAACG,YADZ;AAEVC,YAAAA,aAAa,EAAEJ,MAAM,CAACK,YAFZ;AAGVC,YAAAA,OAAO,EAAEN,MAAM,CAACO,QAAP,CAAgB,CAAhB,CAHC;AAIVC,YAAAA,GAAG,EAAER,MAAM,CAACQ,GAJF;AAKVC,YAAAA,OAAO,EAAET,MAAM,CAACS,OALN;AAMVC,YAAAA,OAAO,EAAEV,MAAM,CAACU,OAAP,CAAe,CAAf,CANC;AAOVC,YAAAA,IAAI,EAAEX,MAAM,CAACW,IAPH;AAQVC,YAAAA,KAAK,EAAEZ,MAAM,CAACY,KARJ;AASVC,YAAAA,KAAK,EAAEb,MAAM,CAACa;AATJ,WAAZ;AAYA,cAAI,CAACpB,EAAL,EAAS,MAAKqB,cAAL,CAAoBb,GAApB,EAAT,KACK,MAAKc,cAAL,CAAoBd,GAApB,EAAyBR,EAAzB;AACN;AACF,OAjBD;AAkBD,KAvGkB;;AAAA,UAoInBuB,cApImB,GAoIF,UAAAC,KAAK,EAAI;AACxB,UAAI,CAACA,KAAL,EAAY,OAAO,EAAP;AAEZ,aAAO,CAACA,KAAD,CAAP;AACD,KAxIkB;;AAAA,UA+InBC,WA/ImB,GA+IL;AACZC,MAAAA,QAAQ,EAAE,OADE;AAEZC,MAAAA,GAAG,EAAE,GAFO;AAGZC,MAAAA,IAAI,EAAE,GAHM;AAIZC,MAAAA,KAAK,EAAE,MAJK;AAKZ,iBAAW,IALC;AAMZ,0BAAoB;AANR,KA/IK;AAAA,UAyJnBC,cAzJmB,GAyJF;AACfC,MAAAA,QAAQ,EAAE;AACRC,QAAAA,EAAE,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR;AADI,OADK;AAIfC,MAAAA,UAAU,EAAE;AACVF,QAAAA,EAAE,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR;AADM;AAJG,KAzJE;AAEjB,UAAKE,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE;AACRpC,QAAAA,EAAE,EAAE,EADI;AAERU,QAAAA,YAAY,EAAE,EAFN;AAGRE,QAAAA,YAAY,EAAE,EAHN;AAIRE,QAAAA,QAAQ,EAAE,EAJF;AAKRC,QAAAA,GAAG,EAAE,EALG;AAMRC,QAAAA,OAAO,EAAE,EAND;AAORC,QAAAA,OAAO,EAAE,EAPD;AAQRC,QAAAA,IAAI,EAAE,EARE;AASRC,QAAAA,KAAK,EAAE,EATC;AAURC,QAAAA,KAAK,EAAE;AAVC,OADC;AAaXiB,MAAAA,KAAK,EAAE,EAbI;AAcXC,MAAAA,KAAK,EAAE,EAdI;AAeXC,MAAAA,MAAM,EAAE;AAfG,KAAb;AAFiB;AAmBlB;;;;wCAQmB;AAAA;;AAAA,UACVvC,EADU,GACH,KAAKN,KAAL,CAAWO,KAAX,CAAiBC,MADd,CACVF,EADU;AAGlBZ,MAAAA,WAAW,CACRoD,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChB,YAAMJ,KAAK,GAAGI,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,UAAAC,IAAI,EAAI;AACtC,iBAAO;AACLpB,YAAAA,KAAK,EAAEoB,IAAI,CAAC5C,EADP;AAEL6C,YAAAA,KAAK,EAAED,IAAI,CAAC9B;AAFP,WAAP;AAID,SALa,CAAd;;AAOA,QAAA,MAAI,CAACgC,QAAL,CAAc;AAAET,UAAAA,KAAK,EAALA;AAAF,SAAd;AACD,OAVH,EAWGU,KAXH,CAWS,UAAAC,EAAE,EAAI;AACX,QAAA,MAAI,CAACrD,wBAAL,CAA8B,OAA9B,EAAuC,cAAvC;AACD,OAbH;AAeAN,MAAAA,QAAQ,GAAGmD,IAAX,CAAgB,UAAAC,QAAQ,EAAI;AAC1B,YAAMH,KAAK,GAAGG,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,UAAAM,IAAI,EAAI;AACtC,iBAAO;AACLzB,YAAAA,KAAK,EAAEyB,IAAI,CAACjD,EADP;AAEL6C,YAAAA,KAAK,EAAEI,IAAI,CAACC;AAFP,WAAP;AAID,SALa,CAAd;;AAOA,QAAA,MAAI,CAACJ,QAAL,CAAc;AAAER,UAAAA,KAAK,EAALA,KAAF;AAASC,UAAAA,MAAM,EAAE;AAAjB,SAAd;AACD,OATD;;AAWA,UAAI,CAACvC,EAAL,EAAS;AACP;AACD;;AAEDb,MAAAA,WAAW,CAACa,EAAD,CAAX,CACGwC,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChB,YAAML,QAAQ,GAAG;AACfpC,UAAAA,EAAE,EAAEyC,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmB1C,EADR;AAEfU,UAAAA,YAAY,EAAE+B,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBS,UAAnB,CAA8BzC,YAF7B;AAGfE,UAAAA,YAAY,EAAE6B,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBS,UAAnB,CAA8BvC,YAH7B;AAIfE,UAAAA,QAAQ,EAAE2B,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBS,UAAnB,CAA8BC,MAJzB;AAKfrC,UAAAA,GAAG,EAAE0B,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBS,UAAnB,CAA8BpC,GALpB;AAMfC,UAAAA,OAAO,EAAEyB,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBS,UAAnB,CAA8BnC,OANxB;AAOfC,UAAAA,OAAO,EAAEwB,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBS,UAAnB,CAA8BlC,OAPxB;AAQfC,UAAAA,IAAI,EAAEuB,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBS,UAAnB,CAA8BjC,IARrB;AASfC,UAAAA,KAAK,EAAEsB,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBS,UAAnB,CAA8BhC,KATtB;AAUfC,UAAAA,KAAK,EAAEqB,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBS,UAAnB,CAA8B/B;AAVtB,SAAjB;;AAaA,QAAA,MAAI,CAAC0B,QAAL,CAAc;AAAEV,UAAAA,QAAQ,EAARA;AAAF,SAAd;AACD,OAhBH,EAiBGW,KAjBH,CAiBS,UAAAC,EAAE,EAAI,CAAE,CAjBjB;AAkBD;;;;;;gDA2BoBxC,G;;;;;;;;uBACbjB,cAAc,CAACiB,GAAD,CAAd,CACHgC,IADG,CACE,UAAAC,QAAQ,EAAI;AAChB,kBAAA,MAAI,CAAC9C,wBAAL,CAA8B,SAA9B,EAAyC,wBAAzC;;AACA,kBAAA,MAAI,CAACD,KAAL,CAAW2D,OAAX,CAAmBC,OAAnB;AACD,iBAJG,EAKHP,KALG,CAKG,UAAAC,EAAE,EAAI;AACX,sBAAIA,EAAE,CAACP,QAAH,IAAeO,EAAE,CAACP,QAAH,CAAYc,MAAZ,KAAuB,GAA1C,EAA+C;AAC7C,wBAAIP,EAAE,CAACP,QAAH,CAAYC,IAAZ,CAAiBc,MAAjB,CAAwBC,WAAxB,CAAoC,CAApC,CAAJ,EACE,MAAI,CAAC9D,wBAAL,CAA8B,OAA9B,EAAuC,qBAAvC;AACH,mBAHD,MAGO;AACL,oBAAA,MAAI,CAACA,wBAAL,CAA8B,OAA9B,EAAuC,cAAvC;AACD;AACF,iBAZG,C;;;;;;;;;;;;;;;;;;;;;iDAeaa,G,EAAKR,E;;;;;;;AACxBV,gBAAAA,cAAc,CAACkB,GAAD,EAAMR,EAAN,CAAd,CACGwC,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChB,kBAAA,MAAI,CAAC9C,wBAAL,CAA8B,SAA9B,EAAyC,wBAAzC;;AACA,kBAAA,MAAI,CAACD,KAAL,CAAW2D,OAAX,CAAmBC,OAAnB;AACD,iBAJH,EAKGP,KALH,CAKS,UAAAC,EAAE,EAAI;AACX,kBAAA,MAAI,CAACrD,wBAAL,CAA8B,OAA9B,EAAuC,cAAvC;AACD,iBAPH;;;;;;;;;;;;;;;;;;wCAgBkB;AAAA,UACVK,EADU,GACH,KAAKN,KAAL,CAAWO,KAAX,CAAiBC,MADd,CACVF,EADU;AAElB,aAAOA,EAAE,GAAG,iBAAH,GAAuB,iBAAhC;AACD;;;6BAqBQ;AAAA,UACC0D,iBADD,GACuB,KAAKhE,KAAL,CAAWU,IADlC,CACCsD,iBADD;AAAA,wBAEoC,KAAKvB,KAFzC;AAAA,UAECC,QAFD,eAECA,QAFD;AAAA,UAEWC,KAFX,eAEWA,KAFX;AAAA,UAEkBC,KAFlB,eAEkBA,KAFlB;AAAA,UAEyBC,MAFzB,eAEyBA,MAFzB;AAIP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4B,KAAKoB,iBAAL,EAA5B,CADJ,CADF,EAKE,oBAAC,GAAD;AAAK,QAAA,IAAI,EAAC,MAAV;AAAiB,QAAA,OAAO,EAAC,QAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,IAAI,EAAE,EAAX;AAAe,QAAA,SAAS,EAAC,eAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACCpB,MAAM,GACL;AAAK,QAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADK,GAIH,IALJ,EAME,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD,oBAAU,KAAKT,cAAf;AAA+B,QAAA,QAAQ,EAAE,KAAKhC,YAA9C;AAA4D,QAAA,SAAS,EAAC,YAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UACE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG4D,iBAAiB,CAAC,cAAD,EAAiB;AACjCE,QAAAA,KAAK,EAAE,CACL;AACEC,UAAAA,QAAQ,EAAE,IADZ;AAEEhE,UAAAA,OAAO,EAAE;AAFX,SADK,CAD0B;AAOjCiE,QAAAA,YAAY,EAAE1B,QAAQ,CAAC1B;AAPU,OAAjB,CAAjB,CAQE,oBAAC,KAAD;AAAO,QAAA,WAAW,EAAC,eAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,CADH,CADF,EAYE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGgD,iBAAiB,CAAC,cAAD,EAAiB;AACjCE,QAAAA,KAAK,EAAE,CACL;AACEC,UAAAA,QAAQ,EAAE,IADZ;AAEEhE,UAAAA,OAAO,EAAE;AAFX,SADK,CAD0B;AAOjCiE,QAAAA,YAAY,EAAE1B,QAAQ,CAACxB;AAPU,OAAjB,CAAjB,CAQE,oBAAC,KAAD;AAAO,QAAA,WAAW,EAAC,eAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,CADH,CAZF,EAuBE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,sBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG8C,iBAAiB,CAAC,UAAD,EAAa;AAC7BE,QAAAA,KAAK,EAAE,CACL;AACEhE,UAAAA,IAAI,EAAE,OADR;AAEEiE,UAAAA,QAAQ,EAAE,IAFZ;AAGEhE,UAAAA,OAAO,EAAE;AAHX,SADK,CADsB;AAQ7BiE,QAAAA,YAAY,EAAE,KAAKvC,cAAL,CAAoBa,QAAQ,CAACtB,QAA7B;AARe,OAAb,CAAjB,CASE,oBAAC,QAAD;AAAU,QAAA,OAAO,EAAEuB,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATF,CADH,CAvBF,EAmCE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,cAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGqB,iBAAiB,CAAC,KAAD,EAAQ;AACxBE,QAAAA,KAAK,EAAE,CACL;AACEC,UAAAA,QAAQ,EAAE,IADZ;AAEEhE,UAAAA,OAAO,EAAE;AAFX,SADK,EAKL;AACEkE,UAAAA,OAAO,EAAE,IAAIC,MAAJ,CAAW,UAAX,CADX;AAEEnE,UAAAA,OAAO,EAAE;AAFX,SALK,CADiB;AAWxBiE,QAAAA,YAAY,EAAE1B,QAAQ,CAACrB;AAXC,OAAR,CAAjB,CAYE,oBAAC,KAAD;AAAO,QAAA,WAAW,EAAC,cAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,CADH,CAnCF,EAkDE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG2C,iBAAiB,CAAC,SAAD,EAAY;AAC5BI,QAAAA,YAAY,EAAE1B,QAAQ,CAACpB;AADK,OAAZ,CAAjB,CAEE,oBAAC,KAAD;AAAO,QAAA,WAAW,EAAC,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADH,CAlDF,EAuDE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG0C,iBAAiB,CAAC,SAAD,EAAY;AAC5BE,QAAAA,KAAK,EAAE,CACL;AACEhE,UAAAA,IAAI,EAAE,OADR;AAEEiE,UAAAA,QAAQ,EAAE,IAFZ;AAGEhE,UAAAA,OAAO,EAAE;AAHX,SADK,CADqB;AAQ5BiE,QAAAA,YAAY,EAAE,KAAKvC,cAAL,CAAoBa,QAAQ,CAACnB,OAA7B;AARc,OAAZ,CAAjB,CASE,oBAAC,QAAD;AAAU,QAAA,OAAO,EAAEqB,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATF,CADH,CAvDF,EAmEE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGoB,iBAAiB,CAAC,MAAD,EAAS;AACzBI,QAAAA,YAAY,EAAE1B,QAAQ,CAAClB;AADE,OAAT,CAAjB,CAEE,oBAAC,KAAD;AAAO,QAAA,WAAW,EAAC,UAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADH,CAnEF,EAwEE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGwC,iBAAiB,CAAC,OAAD,EAAU;AAC1BI,QAAAA,YAAY,EAAE1B,QAAQ,CAACjB;AADG,OAAV,CAAjB,CAEE,oBAAC,KAAD;AAAO,QAAA,WAAW,EAAC,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADH,CAxEF,EA6EE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,gBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGuC,iBAAiB,CAAC,OAAD,EAAU;AAC1BI,QAAAA,YAAY,EAAE1B,QAAQ,CAAChB;AADG,OAAV,CAAjB,CAEE,oBAAC,KAAD;AAAO,QAAA,WAAW,EAAC,gBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADH,CA7EF,EAkFI;AAAK,QAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,SAAb;AAAuB,QAAA,QAAQ,EAAC,QAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,EAIA,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC,YAAT;AAAsB,QAAA,SAAS,EAAC,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJA,CAlFJ,CADF,CANF,CADF,CALF,CADF;AA8GD;;;;EArR2B3C,S;;AAwR9B,eAAeC,IAAI,CAACuF,MAAL,GAAcxE,eAAd,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Form,\n  Row,\n  Col,\n  Card,\n  Input,\n  Button,\n  Cascader,\n  notification\n} from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport {\n  getSupplier,\n  getListShop,\n  listPref,\n  updateSupplier,\n  createSupplier\n} from \"../../../service/handleRequest\";\nimport CircularProgress from \"components/CircularProgress/index\";\nimport '../../../styles/customerStyle/index.css';\n\nclass AddSupplierPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      supplier: {\n        id: \"\",\n        supplierCode: \"\",\n        supplierName: \"\",\n        shopName: \"\",\n        tel: \"\",\n        zipcode: \"\",\n        pref_id: \"\",\n        ward: \"\",\n        addr1: \"\",\n        addr2: \"\"\n      },\n      shops: [],\n      prefs: [],\n      loader: true\n    };\n  }\n\n  openNotificationWithIcon = (type, message) => {\n    notification[type]({\n      message: message\n    });\n  };\n\n  componentDidMount() {\n    const { id } = this.props.match.params;\n\n    getListShop\n      .then(response => {\n        const shops = response.data.map(shop => {\n          return {\n            value: shop.id,\n            label: shop.shopName\n          };\n        });\n\n        this.setState({ shops });\n      })\n      .catch(ex => {\n        this.openNotificationWithIcon(\"error\", \"Server error\");\n      });\n\n    listPref().then(response => {\n      const prefs = response.data.map(pref => {\n        return {\n          value: pref.id,\n          label: pref.name\n        };\n      });\n\n      this.setState({ prefs, loader: false });\n    });\n\n    if (!id) {\n      return;\n    }\n\n    getSupplier(id)\n      .then(response => {\n        const supplier = {\n          id: response.data.data.id,\n          supplierCode: response.data.data.attributes.supplierCode,\n          supplierName: response.data.data.attributes.supplierName,\n          shopName: response.data.data.attributes.shopId,\n          tel: response.data.data.attributes.tel,\n          zipcode: response.data.data.attributes.zipcode,\n          pref_id: response.data.data.attributes.pref_id,\n          ward: response.data.data.attributes.ward,\n          addr1: response.data.data.attributes.addr1,\n          addr2: response.data.data.attributes.addr2\n        };\n\n        this.setState({ supplier });\n      })\n      .catch(ex => {});\n  }\n\n  handleSubmit = e => {\n    const { id } = this.props.match.params;\n\n    e.preventDefault();\n\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        const obj = {\n          supplier_code: values.supplierCode,\n          supplier_name: values.supplierName,\n          shop_id: values.shopName[0],\n          tel: values.tel,\n          zipcode: values.zipcode,\n          pref_id: values.pref_id[0],\n          ward: values.ward,\n          addr1: values.addr1,\n          addr2: values.addr2\n        };\n\n        if (!id) this.doCreateSubmit(obj);\n        else this.doUpdateSubmit(obj, id);\n      }\n    });\n  };\n\n  async doCreateSubmit(obj) {\n    await createSupplier(obj)\n      .then(response => {\n        this.openNotificationWithIcon(\"success\", \"Create rental success.\");\n        this.props.history.replace(`/suppliers`);\n      })\n      .catch(ex => {\n        if (ex.response && ex.response.status === 422) {\n          if (ex.response.data.errors.rental_name[0])\n            this.openNotificationWithIcon(\"error\", \"Shop name is exist.\");\n        } else {\n          this.openNotificationWithIcon(\"error\", \"Server error\");\n        }\n      });\n  }\n\n  async doUpdateSubmit(obj, id) {\n    updateSupplier(obj, id)\n      .then(response => {\n        this.openNotificationWithIcon(\"success\", \"Update rental success.\");\n        this.props.history.replace(`/suppliers`);\n      })\n      .catch(ex => {\n        this.openNotificationWithIcon(\"error\", \"Server error\");\n      });\n  }\n\n  renderInitShop = value => {\n    if (!value) return [];\n\n    return [value];\n  };\n\n  renderTitleHeader() {\n    const { id } = this.props.match.params;\n    return id ? \"Update Supplier\" : \"Create Supplier\";\n  }\n\n  styleLoader = {\n    position: \"fixed\",\n    top: \"0\",\n    left: \"0\",\n    width: \"100%\",\n    \"z-index\": \"12\",\n    \"background-color\": \"#fff\"\n  };\n\n\n  formItemLayout = {\n    labelCol: {\n      sm: { span: 8 }\n    },\n    wrapperCol: {\n      sm: { span: 16 }\n    }\n  };\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    const { supplier, shops, prefs, loader } = this.state;\n\n    return (\n      <div>\n        <div className=\"title-header\">\n            <h3 className=\"text-title\">{this.renderTitleHeader()}</h3>\n        </div>\n\n        <Row type=\"flex\" justify=\"center\">\n          <Col span={24} className=\"pd-0 posi-rel\">\n          {loader ? (\n            <div className=\"on-loader posi-absolute\" >\n              <CircularProgress />\n            </div>\n          ) : null}\n            <Card>\n              <Form {...this.formItemLayout} onSubmit={this.handleSubmit} className=\"form-shape\">\n                <Form.Item label=\"Provider Code\">\n                  {getFieldDecorator(\"supplierCode\", {\n                    rules: [\n                      {\n                        required: true,\n                        message: \"Please input your Provider Code!\"\n                      }\n                    ],\n                    initialValue: supplier.supplierCode\n                  })(<Input placeholder=\"Provider Code\" />)}\n                </Form.Item>\n                <Form.Item label=\"Provider Name\">\n                  {getFieldDecorator(\"supplierName\", {\n                    rules: [\n                      {\n                        required: true,\n                        message: \"Please input your Provider Name!\"\n                      }\n                    ],\n                    initialValue: supplier.supplierName\n                  })(<Input placeholder=\"Provider Name\" />)}\n                </Form.Item>\n                <Form.Item label=\"Store Name Avaliable\">\n                  {getFieldDecorator(\"shopName\", {\n                    rules: [\n                      {\n                        type: \"array\",\n                        required: true,\n                        message: \"Please select your Store Name Avaliable.\"\n                      }\n                    ],\n                    initialValue: this.renderInitShop(supplier.shopName)\n                  })(<Cascader options={shops} />)}\n                </Form.Item>\n                <Form.Item label=\"Phone number\">\n                  {getFieldDecorator(\"tel\", {\n                    rules: [\n                      {\n                        required: true,\n                        message: \"Please input your Phone number!\"\n                      },\n                      {\n                        pattern: new RegExp(\"^[0-9]*$\"),\n                        message: \"Input Phone incorect.\"\n                      }\n                    ],\n                    initialValue: supplier.tel\n                  })(<Input placeholder=\"Phone number\" />)}\n                </Form.Item>\n                <Form.Item label=\"Post code\">\n                  {getFieldDecorator(\"zipcode\", {\n                    initialValue: supplier.zipcode\n                  })(<Input placeholder=\"Post code\" />)}\n                </Form.Item>\n                <Form.Item label=\"City\">\n                  {getFieldDecorator(\"pref_id\", {\n                    rules: [\n                      {\n                        type: \"array\",\n                        required: true,\n                        message: \"Please select your City.\"\n                      }\n                    ],\n                    initialValue: this.renderInitShop(supplier.pref_id)\n                  })(<Cascader options={prefs} />)}\n                </Form.Item>\n                <Form.Item label=\"District\">\n                  {getFieldDecorator(\"ward\", {\n                    initialValue: supplier.ward\n                  })(<Input placeholder=\"District\" />)}\n                </Form.Item>\n                <Form.Item label=\"Town\">\n                  {getFieldDecorator(\"addr1\", {\n                    initialValue: supplier.addr1\n                  })(<Input placeholder=\"Town\" />)}\n                </Form.Item>\n                <Form.Item label=\"Detail address\">\n                  {getFieldDecorator(\"addr2\", {\n                    initialValue: supplier.addr2\n                  })(<Input placeholder=\"Detail address\" />)}\n                </Form.Item>\n                  <div className=\"dp-flex-jf-center dp-flex\">\n                  <Button type=\"primary\" htmlType=\"submit\">\n                    Save\n                  </Button>\n                  <Link to=\"/suppliers\" className=\"ant-btn\">\n                    Back\n                  </Link>\n                </div>\n              </Form>\n            </Card>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default Form.create()(AddSupplierPage);\n"]},"metadata":{},"sourceType":"module"}