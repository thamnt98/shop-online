{"ast":null,"code":"import _classCallCheck from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/thamnt/Downloads/shop-online/front-end/admin/src/routes/Shop/Edit/index.js\";\nimport React, { Component } from \"react\";\nimport { Form, Select, Input, Button, Card, notification } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport { detailShop, listPref, updateShop } from \"../../../service/handleRequest\";\nimport '../../../styles/customerStyle/index.css';\nvar Option = Select.Option;\n\nvar EditShop =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EditShop, _Component);\n\n  function EditShop(props) {\n    var _this;\n\n    _classCallCheck(this, EditShop);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditShop).call(this, props));\n\n    _this.openNotificationWithIcon = function (type, message) {\n      notification[type]({\n        message: message\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          updateShop(_this.props.match.params.id, values).then(function (res) {\n            var data = res.data;\n\n            _this.setState({\n              shop: data,\n              save: true\n            });\n\n            _this.openNotificationWithIcon(\"success\", \"edit success!\");\n\n            _this.props.history.replace(\"/shop\");\n          }).catch(function (e) {\n            var errors = e.response.data.errors;\n            if (errors.shop_code) _this.openNotificationWithIcon(\"error\", errors.shop_code);\n            if (errors.shop_name) _this.openNotificationWithIcon(\"error\", errors.shop_name);\n          });\n        }\n      });\n    };\n\n    _this.onBlurChange = function (e) {\n      var length = e.target.value.length;\n\n      if (length === 0 && e.target.id === 'register_price') {\n        _this.props.form.setFieldsValue({\n          register_price: _this.state.shop.register_price\n        });\n      }\n\n      if (length === 0 && e.target.id === 'second_register_price') {\n        _this.props.form.setFieldsValue({\n          second_register_price: _this.state.shop.second_register_price\n        });\n      }\n\n      if (length === 0 && e.target.id === 'other_shop_entry_fee') {\n        _this.props.form.setFieldsValue({\n          other_shop_entry_fee: _this.state.shop.other_shop_entry_fee\n        });\n      }\n    };\n\n    _this.formItemLayout = {\n      labelCol: {\n        sm: {\n          span: 8\n        }\n      },\n      wrapperCol: {\n        sm: {\n          span: 16\n        }\n      }\n    };\n    _this.state = {\n      shop: {},\n      pref: []\n    };\n    return _this;\n  }\n\n  _createClass(EditShop, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      detailShop(this.props.match.params.id).then(function (response) {\n        var data = response.data;\n\n        _this2.setState({\n          shop: data\n        });\n      });\n      listPref().then(function (response) {\n        var data = response.data;\n        var pref = data.map(function (pref) {\n          return {\n            id: pref.id,\n            name: pref.name\n          };\n        });\n\n        _this2.setState({\n          pref: data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var shop = this.state.shop;\n      var pref = this.state.pref;\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Edit Store\")), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, this.state.mess ? \"Success\" : \"\"), React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(Form, Object.assign({}, this.formItemLayout, {\n        className: \"form-shape\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(Form.Item, {\n        label: \"Store code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, getFieldDecorator(\"shop_code\", {\n        initialValue: shop.shop_code,\n        rules: [{\n          required: true,\n          message: \"Please input your store code!\"\n        }]\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Store name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, getFieldDecorator(\"shop_name\", {\n        initialValue: shop.shop_name,\n        rules: [{\n          required: true,\n          message: \"Please input your store name!\"\n        }]\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Phone number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, getFieldDecorator(\"tel\", {\n        initialValue: shop.tel,\n        rules: [{\n          required: true,\n          message: \"Please input your store name!\"\n        }]\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Postcode\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, getFieldDecorator(\"zipcode\", {\n        initialValue: shop.zipcode,\n        rules: [{\n          required: true,\n          message: \"Please input your store name!\"\n        }]\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"City\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, getFieldDecorator(\"city\", {\n        initialValue: shop.city\n      })(React.createElement(Select, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, pref.map(function (city, index) {\n        return React.createElement(Option, {\n          key: index,\n          value: city.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, city.name);\n      })))), React.createElement(Form.Item, {\n        label: \"District\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, getFieldDecorator(\"ward\", {\n        initialValue: shop.ward\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Town\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, getFieldDecorator(\"addr1\", {\n        initialValue: shop.addr1\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Detailed address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, getFieldDecorator(\"addr2\", {\n        initialValue: shop.addr2\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Registration fee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, getFieldDecorator(\"register_price\", {\n        initialValue: shop.register_price,\n        rules: [{\n          required: true,\n          message: \"Please input your registration fee!\"\n        }, {\n          pattern: new RegExp(\"^[0-9]*$\"),\n          message: \"Input must be number and greater than zero.\"\n        }]\n      })(React.createElement(Input, {\n        onBlur: this.onBlurChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Registration fee for members\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, getFieldDecorator(\"second_register_price\", {\n        initialValue: shop.second_register_price,\n        rules: [{\n          required: true,\n          message: \"Please input your registration fee for members!\"\n        }, {\n          pattern: new RegExp(\"^[0-9]*$\"),\n          message: \"Input must be number and greater than zero.\"\n        }]\n      })(React.createElement(Input, {\n        onBlur: this.onBlurChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Regular membership fee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, getFieldDecorator(\"other_shop_entry_fee\", {\n        initialValue: shop.other_shop_entry_fee,\n        rules: [{\n          required: true,\n          message: \"Please input your regular membership fee!\"\n        }, {\n          pattern: new RegExp(\"^[0-9]*$\"),\n          message: \"Input must be number and greater than zero.\"\n        }]\n      })(React.createElement(Input, {\n        onBlur: this.onBlurChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"dp-flex-jf-center dp-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"Save\"), React.createElement(Link, {\n        to: \"/shop\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(Button, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, \"Back\"))))));\n    }\n  }]);\n\n  return EditShop;\n}(Component);\n\nexport default Form.create()(EditShop);","map":{"version":3,"sources":["/Users/thamnt/Downloads/shop-online/front-end/admin/src/routes/Shop/Edit/index.js"],"names":["React","Component","Form","Select","Input","Button","Card","notification","Link","detailShop","listPref","updateShop","Option","EditShop","props","openNotificationWithIcon","type","message","handleSubmit","e","preventDefault","form","validateFields","err","values","match","params","id","then","res","data","setState","shop","save","history","replace","catch","errors","response","shop_code","shop_name","onBlurChange","length","target","value","setFieldsValue","register_price","state","second_register_price","other_shop_entry_fee","formItemLayout","labelCol","sm","span","wrapperCol","pref","map","name","getFieldDecorator","mess","initialValue","rules","required","tel","zipcode","city","index","ward","addr1","addr2","pattern","RegExp","create"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,KAAvB,EAA8BC,MAA9B,EAAsCC,IAAtC,EAA4CC,YAA5C,QAAgE,MAAhE;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SACEC,UADF,EAEEC,QAFF,EAGEC,UAHF,QAIO,gCAJP;AAKA,OAAO,yCAAP;IAEQC,M,GAAWT,M,CAAXS,M;;IACFC,Q;;;;;AACJ,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kFAAMA,KAAN;;AADiB,UAOnBC,wBAPmB,GAOQ,UAACC,IAAD,EAAOC,OAAP,EAAmB;AAC5CV,MAAAA,YAAY,CAACS,IAAD,CAAZ,CAAmB;AACjBC,QAAAA,OAAO,EAAEA;AADQ,OAAnB;AAGD,KAXkB;;AAAA,UA8BnBC,YA9BmB,GA8BJ,UAAAC,CAAC,EAAI;AAClBA,MAAAA,CAAC,CAACC,cAAF;;AACA,YAAKN,KAAL,CAAWO,IAAX,CAAgBC,cAAhB,CAA+B,UAACC,GAAD,EAAMC,MAAN,EAAiB;AAC9C,YAAI,CAACD,GAAL,EAAU;AACRZ,UAAAA,UAAU,CAAC,MAAKG,KAAL,CAAWW,KAAX,CAAiBC,MAAjB,CAAwBC,EAAzB,EAA6BH,MAA7B,CAAV,CACGI,IADH,CACQ,UAAAC,GAAG,EAAI;AACX,gBAAIC,IAAI,GAAGD,GAAG,CAACC,IAAf;;AACA,kBAAKC,QAAL,CAAc;AAAEC,cAAAA,IAAI,EAAEF,IAAR;AAAcG,cAAAA,IAAI,EAAE;AAApB,aAAd;;AACA,kBAAKlB,wBAAL,CAA8B,SAA9B,EAAyC,eAAzC;;AACA,kBAAKD,KAAL,CAAWoB,OAAX,CAAmBC,OAAnB;AACD,WANH,EAOGC,KAPH,CAOS,UAAAjB,CAAC,EAAI;AACV,gBAAIkB,MAAM,GAAGlB,CAAC,CAACmB,QAAF,CAAWR,IAAX,CAAgBO,MAA7B;AACA,gBAAGA,MAAM,CAACE,SAAV,EAAqB,MAAKxB,wBAAL,CAA8B,OAA9B,EAAuCsB,MAAM,CAACE,SAA9C;AACrB,gBAAGF,MAAM,CAACG,SAAV,EAAqB,MAAKzB,wBAAL,CAA8B,OAA9B,EAAuCsB,MAAM,CAACG,SAA9C;AACtB,WAXH;AAYD;AACF,OAfD;AAgBD,KAhDkB;;AAAA,UAkDnBC,YAlDmB,GAkDN,UAACtB,CAAD,EAAK;AAChB,UAAMuB,MAAM,GAAGvB,CAAC,CAACwB,MAAF,CAASC,KAAT,CAAeF,MAA9B;;AACA,UAAGA,MAAM,KAAK,CAAX,IAAgBvB,CAAC,CAACwB,MAAF,CAAShB,EAAT,KAAc,gBAAjC,EAAkD;AAChD,cAAKb,KAAL,CAAWO,IAAX,CAAgBwB,cAAhB,CAA+B;AAC7BC,UAAAA,cAAc,EAAE,MAAKC,KAAL,CAAWf,IAAX,CAAgBc;AADH,SAA/B;AAGD;;AACD,UAAGJ,MAAM,KAAK,CAAX,IAAgBvB,CAAC,CAACwB,MAAF,CAAShB,EAAT,KAAc,uBAAjC,EAAyD;AACvD,cAAKb,KAAL,CAAWO,IAAX,CAAgBwB,cAAhB,CAA+B;AAC7BG,UAAAA,qBAAqB,EAAE,MAAKD,KAAL,CAAWf,IAAX,CAAgBgB;AADV,SAA/B;AAGD;;AACD,UAAGN,MAAM,KAAK,CAAX,IAAgBvB,CAAC,CAACwB,MAAF,CAAShB,EAAT,KAAc,sBAAjC,EAAwD;AACtD,cAAKb,KAAL,CAAWO,IAAX,CAAgBwB,cAAhB,CAA+B;AAC7BI,UAAAA,oBAAoB,EAAE,MAAKF,KAAL,CAAWf,IAAX,CAAgBiB;AADT,SAA/B;AAGD;AACF,KAnEkB;;AAAA,UAqEnBC,cArEmB,GAqEF;AACfC,MAAAA,QAAQ,EAAE;AACRC,QAAAA,EAAE,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR;AADI,OADK;AAIfC,MAAAA,UAAU,EAAE;AACVF,QAAAA,EAAE,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR;AADM;AAJG,KArEE;AAEjB,UAAKN,KAAL,GAAa;AACXf,MAAAA,IAAI,EAAE,EADK;AAEXuB,MAAAA,IAAI,EAAE;AAFK,KAAb;AAFiB;AAMlB;;;;wCAMmB;AAAA;;AAClB9C,MAAAA,UAAU,CAAC,KAAKK,KAAL,CAAWW,KAAX,CAAiBC,MAAjB,CAAwBC,EAAzB,CAAV,CAAuCC,IAAvC,CAA4C,UAAAU,QAAQ,EAAI;AACtD,YAAIR,IAAI,GAAGQ,QAAQ,CAACR,IAApB;;AACA,QAAA,MAAI,CAACC,QAAL,CAAc;AAAEC,UAAAA,IAAI,EAAEF;AAAR,SAAd;AACD,OAHD;AAKApB,MAAAA,QAAQ,GAAGkB,IAAX,CAAgB,UAAAU,QAAQ,EAAI;AAC1B,YAAIR,IAAI,GAAGQ,QAAQ,CAACR,IAApB;AACA,YAAMyB,IAAI,GAAGzB,IAAI,CAAC0B,GAAL,CAAS,UAAAD,IAAI,EAAI;AAC5B,iBAAO;AACL5B,YAAAA,EAAE,EAAE4B,IAAI,CAAC5B,EADJ;AAEL8B,YAAAA,IAAI,EAAEF,IAAI,CAACE;AAFN,WAAP;AAID,SALY,CAAb;;AAMA,QAAA,MAAI,CAAC1B,QAAL,CAAc;AAAEwB,UAAAA,IAAI,EAAEzB;AAAR,SAAd;AACD,OATD;AAUD;;;6BAkDQ;AACP,UAAIE,IAAI,GAAG,KAAKe,KAAL,CAAWf,IAAtB;AACA,UAAIuB,IAAI,GAAG,KAAKR,KAAL,CAAWQ,IAAtB;AAFO,UAGCG,iBAHD,GAGuB,KAAK5C,KAAL,CAAWO,IAHlC,CAGCqC,iBAHD;AAIP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CADA,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI,KAAKX,KAAL,CAAWY,IAAX,GAAkB,SAAlB,GAA8B,EAAlC,CAJF,EAKE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD,oBACM,KAAKT,cADX;AAEE,QAAA,SAAS,EAAC,YAFZ;AAGE,QAAA,QAAQ,EAAE,KAAKhC,YAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAKE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGwC,iBAAiB,CAAC,WAAD,EAAc;AAC9BE,QAAAA,YAAY,EAAE5B,IAAI,CAACO,SADW;AAE9BsB,QAAAA,KAAK,EAAE,CACL;AAAEC,UAAAA,QAAQ,EAAE,IAAZ;AAAkB7C,UAAAA,OAAO,EAAE;AAA3B,SADK;AAFuB,OAAd,CAAjB,CAKE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CADH,CALF,EAcE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGyC,iBAAiB,CAAC,WAAD,EAAc;AAC9BE,QAAAA,YAAY,EAAE5B,IAAI,CAACQ,SADW;AAE9BqB,QAAAA,KAAK,EAAE,CACL;AAAEC,UAAAA,QAAQ,EAAE,IAAZ;AAAkB7C,UAAAA,OAAO,EAAE;AAA3B,SADK;AAFuB,OAAd,CAAjB,CAKE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CADH,CAdF,EAuBE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,cAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGyC,iBAAiB,CAAC,KAAD,EAAQ;AACxBE,QAAAA,YAAY,EAAE5B,IAAI,CAAC+B,GADK;AAExBF,QAAAA,KAAK,EAAE,CACL;AAAEC,UAAAA,QAAQ,EAAE,IAAZ;AAAkB7C,UAAAA,OAAO,EAAE;AAA3B,SADK;AAFiB,OAAR,CAAjB,CAKE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CADH,CAvBF,EAgCE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGyC,iBAAiB,CAAC,SAAD,EAAY;AAC5BE,QAAAA,YAAY,EAAE5B,IAAI,CAACgC,OADS;AAE5BH,QAAAA,KAAK,EAAE,CACL;AAAEC,UAAAA,QAAQ,EAAE,IAAZ;AAAkB7C,UAAAA,OAAO,EAAE;AAA3B,SADK;AAFqB,OAAZ,CAAjB,CAKE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CADH,CAhCF,EAyCE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGyC,iBAAiB,CAAC,MAAD,EAAS;AACzBE,QAAAA,YAAY,EAAE5B,IAAI,CAACiC;AADM,OAAT,CAAjB,CAGC,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGV,IAAI,CAACC,GAAL,CAAS,UAACS,IAAD,EAAOC,KAAP;AAAA,eACR,oBAAC,MAAD;AAAQ,UAAA,GAAG,EAAEA,KAAb;AAAoB,UAAA,KAAK,EAAED,IAAI,CAACR,IAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGQ,IAAI,CAACR,IADR,CADQ;AAAA,OAAT,CADH,CAHD,CADH,CAzCF,EAuDE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGC,iBAAiB,CAAC,MAAD,EAAS;AACzBE,QAAAA,YAAY,EAAE5B,IAAI,CAACmC;AADM,OAAT,CAAjB,CAEE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADH,CAvDF,EA6DE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGT,iBAAiB,CAAC,OAAD,EAAU;AAC1BE,QAAAA,YAAY,EAAE5B,IAAI,CAACoC;AADO,OAAV,CAAjB,CAEE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADH,CA7DF,EAmEE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,kBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGV,iBAAiB,CAAC,OAAD,EAAU;AAC1BE,QAAAA,YAAY,EAAE5B,IAAI,CAACqC;AADO,OAAV,CAAjB,CAEE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADH,CAnEF,EAyEE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,kBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGX,iBAAiB,CAAC,gBAAD,EAAmB;AACnCE,QAAAA,YAAY,EAAE5B,IAAI,CAACc,cADgB;AAEnCe,QAAAA,KAAK,EAAE,CACL;AACEC,UAAAA,QAAQ,EAAE,IADZ;AAEE7C,UAAAA,OAAO,EAAE;AAFX,SADK,EAKL;AACEqD,UAAAA,OAAO,EAAE,IAAIC,MAAJ,CAAW,UAAX,CADX;AAEEtD,UAAAA,OAAO,EAAG;AAFZ,SALK;AAF4B,OAAnB,CAAjB,CAYE,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAE,KAAKwB,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,CADH,CAzEF,EAyFE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,8BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGiB,iBAAiB,CAAC,uBAAD,EAA0B;AAC1CE,QAAAA,YAAY,EAAE5B,IAAI,CAACgB,qBADuB;AAE1Ca,QAAAA,KAAK,EAAE,CACL;AACEC,UAAAA,QAAQ,EAAE,IADZ;AAEE7C,UAAAA,OAAO,EAAE;AAFX,SADK,EAKL;AACEqD,UAAAA,OAAO,EAAE,IAAIC,MAAJ,CAAW,UAAX,CADX;AAEEtD,UAAAA,OAAO,EAAG;AAFZ,SALK;AAFmC,OAA1B,CAAjB,CAYE,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAE,KAAKwB,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,CADH,CAzFF,EAyGE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,wBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGiB,iBAAiB,CAAC,sBAAD,EAAyB;AACzCE,QAAAA,YAAY,EAAE5B,IAAI,CAACiB,oBADsB;AAEzCY,QAAAA,KAAK,EAAE,CACL;AACEC,UAAAA,QAAQ,EAAE,IADZ;AAEE7C,UAAAA,OAAO,EAAE;AAFX,SADK,EAKL;AACEqD,UAAAA,OAAO,EAAE,IAAIC,MAAJ,CAAW,UAAX,CADX;AAEEtD,UAAAA,OAAO,EAAG;AAFZ,SALK;AAFkC,OAAzB,CAAjB,CAYE,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAE,KAAKwB,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,CADH,CAzGF,EAyHE;AAAK,QAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,SADP;AAEE,QAAA,QAAQ,EAAC,QAFX;AAGE,QAAA,OAAO,EAAE,KAAKvB,YAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAQE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CARF,CAzHF,CADF,CALF,CADF;AAkJD;;;;EArOoBjB,S;;AAuOvB,eAAeC,IAAI,CAACsE,MAAL,GAAc3D,QAAd,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Form, Select, Input, Button, Card, notification } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport {\n  detailShop,\n  listPref,\n  updateShop\n} from \"../../../service/handleRequest\";\nimport '../../../styles/customerStyle/index.css';\n\nconst { Option } = Select;\nclass EditShop extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shop: {},\n      pref: [],\n    };\n  }\n  openNotificationWithIcon = (type, message) => {\n    notification[type]({\n      message: message\n    });\n  };\n  componentDidMount() {\n    detailShop(this.props.match.params.id).then(response => {\n      var data = response.data;\n      this.setState({ shop: data });\n    });\n\n    listPref().then(response => {\n      var data = response.data;\n      const pref = data.map(pref => {\n        return {\n          id: pref.id,\n          name: pref.name\n        };\n      });\n      this.setState({ pref: data });\n    });\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        updateShop(this.props.match.params.id, values)\n          .then(res => {\n            var data = res.data;\n            this.setState({ shop: data, save: true });\n            this.openNotificationWithIcon(\"success\", \"edit success!\");\n            this.props.history.replace(`/shop`);\n          })\n          .catch(e => {\n            var errors = e.response.data.errors;\n            if(errors.shop_code) this.openNotificationWithIcon(\"error\", errors.shop_code);\n            if(errors.shop_name) this.openNotificationWithIcon(\"error\", errors.shop_name);\n          });\n      }\n    });\n  };\n\n  onBlurChange=(e)=>{\n    const length = e.target.value.length;\n    if(length === 0 && e.target.id==='register_price'){\n      this.props.form.setFieldsValue({\n        register_price: this.state.shop.register_price,\n      });\n    }\n    if(length === 0 && e.target.id==='second_register_price'){\n      this.props.form.setFieldsValue({\n        second_register_price: this.state.shop.second_register_price,\n      });\n    }\n    if(length === 0 && e.target.id==='other_shop_entry_fee'){\n      this.props.form.setFieldsValue({\n        other_shop_entry_fee: this.state.shop.other_shop_entry_fee,\n      });\n    }\n  }\n\n  formItemLayout = {\n    labelCol: {\n      sm: { span: 8 }\n    },\n    wrapperCol: {\n      sm: { span: 16 }\n    }\n  };\n\n  render() {\n    let shop = this.state.shop;\n    let pref = this.state.pref;\n    const { getFieldDecorator } = this.props.form;\n    return (\n      <div>\n      <div className=\"title-header\">\n        <h3 className=\"text-title\">Edit Store</h3>\n        </div>\n        <p>{this.state.mess ? \"Success\" : \"\"}</p>\n        <Card>\n          <Form\n            {...this.formItemLayout}\n            className=\"form-shape\"\n            onSubmit={this.handleSubmit}\n          >\n            <Form.Item label=\"Store code\">\n              {getFieldDecorator(\"shop_code\", {\n                initialValue: shop.shop_code,\n                rules: [\n                  { required: true, message: \"Please input your store code!\" }\n                ]\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Store name\">\n              {getFieldDecorator(\"shop_name\", {\n                initialValue: shop.shop_name,\n                rules: [\n                  { required: true, message: \"Please input your store name!\" }\n                ]\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Phone number\">\n              {getFieldDecorator(\"tel\", {\n                initialValue: shop.tel,\n                rules: [\n                  { required: true, message: \"Please input your store name!\" }\n                ]\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Postcode\">\n              {getFieldDecorator(\"zipcode\", {\n                initialValue: shop.zipcode,\n                rules: [\n                  { required: true, message: \"Please input your store name!\" }\n                ]\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"City\">\n              {getFieldDecorator(\"city\", {\n                initialValue: shop.city\n              })(\n                <Select>\n                  {pref.map((city, index) => (\n                    <Option key={index} value={city.name}>\n                      {city.name}\n                    </Option>\n                  ))}\n                </Select>\n              )}\n            </Form.Item>\n\n            <Form.Item label=\"District\">\n              {getFieldDecorator(\"ward\", {\n                initialValue: shop.ward\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Town\">\n              {getFieldDecorator(\"addr1\", {\n                initialValue: shop.addr1\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Detailed address\">\n              {getFieldDecorator(\"addr2\", {\n                initialValue: shop.addr2\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Registration fee\">\n              {getFieldDecorator(\"register_price\", {\n                initialValue: shop.register_price,\n                rules: [\n                  {\n                    required: true,\n                    message: \"Please input your registration fee!\"\n                  },\n                  {\n                    pattern: new RegExp(\"^[0-9]*$\"),\n                    message:  \"Input must be number and greater than zero.\"\n                  }\n                ]\n              })(<Input onBlur={this.onBlurChange}/>)}\n            </Form.Item>\n\n            <Form.Item label=\"Registration fee for members\">\n              {getFieldDecorator(\"second_register_price\", {\n                initialValue: shop.second_register_price,\n                rules: [\n                  {\n                    required: true,\n                    message: \"Please input your registration fee for members!\"\n                  },\n                  {\n                    pattern: new RegExp(\"^[0-9]*$\"),\n                    message:  \"Input must be number and greater than zero.\"\n                  }\n                ]\n              })(<Input onBlur={this.onBlurChange}/>)}\n            </Form.Item>\n\n            <Form.Item label=\"Regular membership fee\">\n              {getFieldDecorator(\"other_shop_entry_fee\", {\n                initialValue: shop.other_shop_entry_fee,\n                rules: [\n                  {\n                    required: true,\n                    message: \"Please input your regular membership fee!\"\n                  },\n                  {\n                    pattern: new RegExp(\"^[0-9]*$\"),\n                    message:  \"Input must be number and greater than zero.\"\n                  }\n                ]\n              })(<Input onBlur={this.onBlurChange}/>)}\n            </Form.Item>\n\n            <div className=\"dp-flex-jf-center dp-flex\">\n              <Button\n                type=\"primary\"\n                htmlType=\"submit\"\n                onClick={this.handleSubmit}\n              >\n                Save\n              </Button>\n              <Link to=\"/shop\">\n                <Button>\n                  Back\n                </Button>\n              </Link>\n              </div>\n          </Form>\n        </Card>\n      </div>\n    );\n  }\n}\nexport default Form.create()(EditShop);\n"]},"metadata":{},"sourceType":"module"}