{"ast":null,"code":"import _classCallCheck from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/thamnt/Downloads/shop-online/front-end/admin/src/routes/Shop/New/index.js\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router\";\nimport { Form, Select, Input, Button, Card, notification } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { listPref, addShop } from \"../../../service/handleRequest\";\nimport '../../../styles/customerStyle/index.css';\nvar Option = Select.Option;\n\nvar NewShop =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewShop, _Component);\n\n  function NewShop(props) {\n    var _this;\n\n    _classCallCheck(this, NewShop);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewShop).call(this, props));\n\n    _this.openNotificationWithIcon = function (type, message) {\n      notification[type]({\n        message: message\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          addShop(values).then(function (res) {\n            var data = res.data;\n\n            _this.setState({\n              shop: data\n            });\n\n            _this.openNotificationWithIcon(\"success\", \"Add shop success!\");\n\n            _this.props.history.replace(\"/shop\");\n          }).catch(function (e) {\n            var errors = e.response.data.errors;\n            if (errors.shop_code) _this.openNotificationWithIcon(\"error\", errors.shop_code);\n            if (errors.shop_name) _this.openNotificationWithIcon(\"error\", errors.shop_name);\n          });\n        }\n      });\n    };\n\n    _this.onBlurChange = function (e) {\n      var length = e.target.value.length;\n\n      if (length === 0 && e.target.id === 'register_price') {\n        _this.props.form.setFieldsValue({\n          register_price: 0\n        });\n      }\n\n      if (length === 0 && e.target.id === 'second_register_price') {\n        _this.props.form.setFieldsValue({\n          second_register_price: 0\n        });\n      }\n\n      if (length === 0 && e.target.id === 'other_shop_entry_fee') {\n        _this.props.form.setFieldsValue({\n          other_shop_entry_fee: 0\n        });\n      }\n    };\n\n    _this.formItemLayout = {\n      labelCol: {\n        sm: {\n          span: 8\n        }\n      },\n      wrapperCol: {\n        sm: {\n          span: 16\n        }\n      }\n    };\n    _this.state = {\n      pref: []\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(NewShop, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      listPref().then(function (response) {\n        var data = response.data;\n        var pref = data.map(function (pref) {\n          return {\n            id: pref.id,\n            name: pref.name\n          };\n        });\n\n        _this2.setState({\n          pref: data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var pref = this.state.pref;\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Create Store\")), React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(Form, Object.assign({}, this.formItemLayout, {\n        className: \"form-shape\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), React.createElement(Form.Item, {\n        label: \"Store code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, getFieldDecorator(\"shop_code\", {\n        rules: [{\n          required: true,\n          message: \"Please input your store code!\"\n        }]\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Store name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, getFieldDecorator(\"shop_name\", {\n        rules: [{\n          required: true,\n          message: \"Please input your store name!\"\n        }]\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Phone number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, getFieldDecorator(\"tel\", {\n        rules: [{\n          required: true,\n          message: \"Please input your phone number!\"\n        }]\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Postcode\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, getFieldDecorator(\"zipcode\", {\n        rules: [{\n          required: true,\n          message: \"Please input your postcode!\"\n        }]\n      })(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"City\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, getFieldDecorator(\"city\", {\n        rules: [{\n          required: true,\n          message: \"Please input your city!\"\n        }]\n      })(React.createElement(Select, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, pref.map(function (city, index) {\n        return React.createElement(Option, {\n          key: index,\n          value: city.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, city.name);\n      })))), React.createElement(Form.Item, {\n        label: \"District\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, getFieldDecorator(\"ward\", {})(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Town\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, getFieldDecorator(\"addr1\", {})(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Detailed address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, getFieldDecorator(\"addr2\", {})(React.createElement(Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Registration fee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, getFieldDecorator(\"register_price\", {\n        initialValue: 0,\n        rules: [{\n          required: true,\n          message: \"Please input your registration fee!\"\n        }, {\n          pattern: new RegExp(\"^[0-9]*$\"),\n          message: \"Input must be number and greater than zero.\"\n        }]\n      })(React.createElement(Input, {\n        onBlur: this.onBlurChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Registration fee for members\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, getFieldDecorator(\"second_register_price\", {\n        initialValue: 0,\n        rules: [{\n          required: true,\n          message: \"Please input your registration fee for members!\"\n        }, {\n          pattern: new RegExp(\"^[0-9]*$\"),\n          message: \"Input must be number and greater than zero.\"\n        }]\n      })(React.createElement(Input, {\n        onBlur: this.onBlurChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Regular membership fee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, getFieldDecorator(\"other_shop_entry_fee\", {\n        initialValue: 0,\n        rules: [{\n          required: true,\n          message: \"Please input your regular membership fee!\"\n        }, {\n          pattern: new RegExp(\"^[0-9]*$\"),\n          message: \"Input must be number and greater than zero.\"\n        }]\n      })(React.createElement(Input, {\n        onBlur: this.onBlurChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"dp-flex-jf-center dp-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Save\"), React.createElement(Link, {\n        to: \"/shop\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(Button, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"Back\"))))));\n    }\n  }]);\n\n  return NewShop;\n}(Component);\n\nexport default Form.create()(NewShop);","map":{"version":3,"sources":["/Users/thamnt/Downloads/shop-online/front-end/admin/src/routes/Shop/New/index.js"],"names":["React","Component","Redirect","Form","Select","Input","Button","Card","notification","Link","axios","listPref","addShop","Option","NewShop","props","openNotificationWithIcon","type","message","handleSubmit","e","preventDefault","form","validateFields","err","values","then","res","data","setState","shop","history","replace","catch","errors","response","shop_code","shop_name","onBlurChange","length","target","value","id","setFieldsValue","register_price","second_register_price","other_shop_entry_fee","formItemLayout","labelCol","sm","span","wrapperCol","state","pref","bind","map","name","getFieldDecorator","rules","required","city","index","initialValue","pattern","RegExp","create"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,KAAvB,EAA8BC,MAA9B,EAAsCC,IAAtC,EAA4CC,YAA5C,QAAgE,MAAhE;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,OAAnB,QAAkC,gCAAlC;AACA,OAAO,yCAAP;IACQC,M,GAAWT,M,CAAXS,M;;IACFC,O;;;;;AACJ,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,iFAAMA,KAAN;;AADiB,UAQnBC,wBARmB,GAQQ,UAACC,IAAD,EAAOC,OAAP,EAAmB;AAC5CV,MAAAA,YAAY,CAACS,IAAD,CAAZ,CAAmB;AACjBC,QAAAA,OAAO,EAAEA;AADQ,OAAnB;AAGD,KAZkB;;AAAA,UA2BnBC,YA3BmB,GA2BJ,UAAAC,CAAC,EAAI;AAClBA,MAAAA,CAAC,CAACC,cAAF;;AACA,YAAKN,KAAL,CAAWO,IAAX,CAAgBC,cAAhB,CAA+B,UAACC,GAAD,EAAMC,MAAN,EAAiB;AAC9C,YAAI,CAACD,GAAL,EAAU;AACRZ,UAAAA,OAAO,CAACa,MAAD,CAAP,CACGC,IADH,CACQ,UAAAC,GAAG,EAAI;AACX,gBAAIC,IAAI,GAAGD,GAAG,CAACC,IAAf;;AACA,kBAAKC,QAAL,CAAc;AAAEC,cAAAA,IAAI,EAAEF;AAAR,aAAd;;AACA,kBAAKZ,wBAAL,CAA8B,SAA9B,EAAyC,mBAAzC;;AACA,kBAAKD,KAAL,CAAWgB,OAAX,CAAmBC,OAAnB;AACD,WANH,EAOGC,KAPH,CAOS,UAAAb,CAAC,EAAI;AACV,gBAAIc,MAAM,GAAGd,CAAC,CAACe,QAAF,CAAWP,IAAX,CAAgBM,MAA7B;AACA,gBAAGA,MAAM,CAACE,SAAV,EAAqB,MAAKpB,wBAAL,CAA8B,OAA9B,EAAuCkB,MAAM,CAACE,SAA9C;AACrB,gBAAGF,MAAM,CAACG,SAAV,EAAqB,MAAKrB,wBAAL,CAA8B,OAA9B,EAAuCkB,MAAM,CAACG,SAA9C;AACtB,WAXH;AAYD;AACF,OAfD;AAgBD,KA7CkB;;AAAA,UA8CnBC,YA9CmB,GA8CN,UAAClB,CAAD,EAAK;AAChB,UAAMmB,MAAM,GAAGnB,CAAC,CAACoB,MAAF,CAASC,KAAT,CAAeF,MAA9B;;AACA,UAAGA,MAAM,KAAK,CAAX,IAAgBnB,CAAC,CAACoB,MAAF,CAASE,EAAT,KAAc,gBAAjC,EAAkD;AAChD,cAAK3B,KAAL,CAAWO,IAAX,CAAgBqB,cAAhB,CAA+B;AAC7BC,UAAAA,cAAc,EAAE;AADa,SAA/B;AAGD;;AACD,UAAGL,MAAM,KAAK,CAAX,IAAgBnB,CAAC,CAACoB,MAAF,CAASE,EAAT,KAAc,uBAAjC,EAAyD;AACvD,cAAK3B,KAAL,CAAWO,IAAX,CAAgBqB,cAAhB,CAA+B;AAC7BE,UAAAA,qBAAqB,EAAE;AADM,SAA/B;AAGD;;AACD,UAAGN,MAAM,KAAK,CAAX,IAAgBnB,CAAC,CAACoB,MAAF,CAASE,EAAT,KAAc,sBAAjC,EAAwD;AACtD,cAAK3B,KAAL,CAAWO,IAAX,CAAgBqB,cAAhB,CAA+B;AAC7BG,UAAAA,oBAAoB,EAAE;AADO,SAA/B;AAGD;AACF,KA/DkB;;AAAA,UAiEnBC,cAjEmB,GAiEF;AACfC,MAAAA,QAAQ,EAAE;AACRC,QAAAA,EAAE,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR;AADI,OADK;AAIfC,MAAAA,UAAU,EAAE;AACVF,QAAAA,EAAE,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR;AADM;AAJG,KAjEE;AAEjB,UAAKE,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE;AADK,KAAb;AAGA,UAAKlC,YAAL,GAAoB,MAAKA,YAAL,CAAkBmC,IAAlB,uDAApB;AALiB;AAMlB;;;;wCAQmB;AAAA;;AAClB3C,MAAAA,QAAQ,GAAGe,IAAX,CAAgB,UAAAS,QAAQ,EAAI;AAC1B,YAAIP,IAAI,GAAGO,QAAQ,CAACP,IAApB;AACA,YAAMyB,IAAI,GAAGzB,IAAI,CAAC2B,GAAL,CAAS,UAAAF,IAAI,EAAI;AAC5B,iBAAO;AACLX,YAAAA,EAAE,EAAEW,IAAI,CAACX,EADJ;AAELc,YAAAA,IAAI,EAAEH,IAAI,CAACG;AAFN,WAAP;AAID,SALY,CAAb;;AAMA,QAAA,MAAI,CAAC3B,QAAL,CAAc;AAAEwB,UAAAA,IAAI,EAAEzB;AAAR,SAAd;AACD,OATD;AAUD;;;6BAiDQ;AACP,UAAIyB,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAtB;AADO,UAECI,iBAFD,GAEuB,KAAK1C,KAAL,CAAWO,IAFlC,CAECmC,iBAFD;AAGP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CADA,EAIE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD,oBACM,KAAKV,cADX;AAEE,QAAA,SAAS,EAAC,YAFZ;AAGE,QAAA,QAAQ,EAAE,KAAK5B,YAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAKE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGsC,iBAAiB,CAAC,WAAD,EAAc;AAC9BC,QAAAA,KAAK,EAAE,CACL;AAAEC,UAAAA,QAAQ,EAAE,IAAZ;AAAkBzC,UAAAA,OAAO,EAAE;AAA3B,SADK;AADuB,OAAd,CAAjB,CAIE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CADH,CALF,EAaE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGuC,iBAAiB,CAAC,WAAD,EAAc;AAC9BC,QAAAA,KAAK,EAAE,CACL;AAAEC,UAAAA,QAAQ,EAAE,IAAZ;AAAkBzC,UAAAA,OAAO,EAAE;AAA3B,SADK;AADuB,OAAd,CAAjB,CAIE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CADH,CAbF,EAqBE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,cAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGuC,iBAAiB,CAAC,KAAD,EAAQ;AACxBC,QAAAA,KAAK,EAAE,CACL;AAAEC,UAAAA,QAAQ,EAAE,IAAZ;AAAkBzC,UAAAA,OAAO,EAAE;AAA3B,SADK;AADiB,OAAR,CAAjB,CAIE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CADH,CArBF,EA6BE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGuC,iBAAiB,CAAC,SAAD,EAAY;AAC5BC,QAAAA,KAAK,EAAE,CACL;AAAEC,UAAAA,QAAQ,EAAE,IAAZ;AAAkBzC,UAAAA,OAAO,EAAE;AAA3B,SADK;AADqB,OAAZ,CAAjB,CAIE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CADH,CA7BF,EAqCE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGuC,iBAAiB,CAAC,MAAD,EAAS;AACzBC,QAAAA,KAAK,EAAE,CAAC;AAAEC,UAAAA,QAAQ,EAAE,IAAZ;AAAkBzC,UAAAA,OAAO,EAAE;AAA3B,SAAD;AADkB,OAAT,CAAjB,CAGC,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGmC,IAAI,CAACE,GAAL,CAAS,UAACK,IAAD,EAAOC,KAAP;AAAA,eACR,oBAAC,MAAD;AAAQ,UAAA,GAAG,EAAEA,KAAb;AAAoB,UAAA,KAAK,EAAED,IAAI,CAACJ,IAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGI,IAAI,CAACJ,IADR,CADQ;AAAA,OAAT,CADH,CAHD,CADH,CArCF,EAmDE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGC,iBAAiB,CAAC,MAAD,EAAS,EAAT,CAAjB,CACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADH,CAnDF,EAwDE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGA,iBAAiB,CAAC,OAAD,EAAU,EAAV,CAAjB,CACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADH,CAxDF,EA6DE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,kBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGA,iBAAiB,CAAC,OAAD,EAAU,EAAV,CAAjB,CACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADH,CA7DF,EAkEE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,kBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGA,iBAAiB,CAAC,gBAAD,EAAmB;AACnCK,QAAAA,YAAY,EAAC,CADsB;AAEnCJ,QAAAA,KAAK,EAAE,CACL;AACEC,UAAAA,QAAQ,EAAE,IADZ;AAEEzC,UAAAA,OAAO,EAAE;AAFX,SADK,EAKL;AACE6C,UAAAA,OAAO,EAAE,IAAIC,MAAJ,CAAW,UAAX,CADX;AAEE9C,UAAAA,OAAO,EAAE;AAFX,SALK;AAF4B,OAAnB,CAAjB,CAYE,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAE,KAAKoB,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,CADH,CAlEF,EAkFE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,8BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGmB,iBAAiB,CAAC,uBAAD,EAA0B;AAC1CK,QAAAA,YAAY,EAAE,CAD4B;AAE1CJ,QAAAA,KAAK,EAAE,CACL;AACEC,UAAAA,QAAQ,EAAE,IADZ;AAEEzC,UAAAA,OAAO,EAAE;AAFX,SADK,EAKL;AACE6C,UAAAA,OAAO,EAAE,IAAIC,MAAJ,CAAW,UAAX,CADX;AAEE9C,UAAAA,OAAO,EAAE;AAFX,SALK;AAFmC,OAA1B,CAAjB,CAYE,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAE,KAAKoB,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,CADH,CAlFF,EAkGE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAC,wBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGmB,iBAAiB,CAAC,sBAAD,EAAyB;AACzCK,QAAAA,YAAY,EAAE,CAD2B;AAEzCJ,QAAAA,KAAK,EAAE,CACL;AACEC,UAAAA,QAAQ,EAAE,IADZ;AAEEzC,UAAAA,OAAO,EAAE;AAFX,SADK,EAKL;AACE6C,UAAAA,OAAO,EAAE,IAAIC,MAAJ,CAAW,UAAX,CADX;AAEE9C,UAAAA,OAAO,EAAE;AAFX,SALK;AAFkC,OAAzB,CAAjB,CAYE,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAE,KAAKoB,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,CADH,CAlGF,EAkHE;AAAK,QAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,SADP;AAEE,QAAA,QAAQ,EAAC,QAFX;AAGE,QAAA,OAAO,EAAE,KAAKnB,YAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAQE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CARF,CAlHF,CADF,CAJF,CADF;AA0ID;;;;EAxNmBlB,S;;AA0NtB,eAAeE,IAAI,CAAC8D,MAAL,GAAcnD,OAAd,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Redirect } from \"react-router\";\nimport { Form, Select, Input, Button, Card, notification } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { listPref, addShop } from \"../../../service/handleRequest\";\nimport '../../../styles/customerStyle/index.css';\nconst { Option } = Select;\nclass NewShop extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pref: [],\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  openNotificationWithIcon = (type, message) => {\n    notification[type]({\n      message: message\n    });\n  };\n\n  componentDidMount() {\n    listPref().then(response => {\n      var data = response.data;\n      const pref = data.map(pref => {\n        return {\n          id: pref.id,\n          name: pref.name\n        };\n      });\n      this.setState({ pref: data });\n    });\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        addShop(values)\n          .then(res => {\n            var data = res.data;\n            this.setState({ shop: data });\n            this.openNotificationWithIcon(\"success\", \"Add shop success!\");\n            this.props.history.replace(`/shop`);\n          })\n          .catch(e => {\n            var errors = e.response.data.errors;\n            if(errors.shop_code) this.openNotificationWithIcon(\"error\", errors.shop_code);\n            if(errors.shop_name) this.openNotificationWithIcon(\"error\", errors.shop_name);\n          });\n      }\n    });\n  };\n  onBlurChange=(e)=>{\n    const length = e.target.value.length;\n    if(length === 0 && e.target.id==='register_price'){\n      this.props.form.setFieldsValue({\n        register_price: 0,\n      });\n    }\n    if(length === 0 && e.target.id==='second_register_price'){\n      this.props.form.setFieldsValue({\n        second_register_price: 0,\n      });\n    }\n    if(length === 0 && e.target.id==='other_shop_entry_fee'){\n      this.props.form.setFieldsValue({\n        other_shop_entry_fee: 0,\n      });\n    }\n  }\n\n  formItemLayout = {\n    labelCol: {\n      sm: { span: 8 }\n    },\n    wrapperCol: {\n      sm: { span: 16 }\n    }\n  };\n\n  render() {\n    let pref = this.state.pref;\n    const { getFieldDecorator } = this.props.form;\n    return (\n      <div>\n      <div className=\"title-header\">\n        <h3 className=\"text-title\">Create Store</h3>\n        </div>\n        <Card>\n          <Form\n            {...this.formItemLayout}\n            className=\"form-shape\"\n            onSubmit={this.handleSubmit}\n          >\n            <Form.Item label=\"Store code\">\n              {getFieldDecorator(\"shop_code\", {\n                rules: [\n                  { required: true, message: \"Please input your store code!\" }\n                ]\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Store name\">\n              {getFieldDecorator(\"shop_name\", {\n                rules: [\n                  { required: true, message: \"Please input your store name!\" }\n                ]\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Phone number\">\n              {getFieldDecorator(\"tel\", {\n                rules: [\n                  { required: true, message: \"Please input your phone number!\" }\n                ]\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Postcode\">\n              {getFieldDecorator(\"zipcode\", {\n                rules: [\n                  { required: true, message: \"Please input your postcode!\" }\n                ]\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"City\">\n              {getFieldDecorator(\"city\", {\n                rules: [{ required: true, message: \"Please input your city!\" }]\n              })(\n                <Select>\n                  {pref.map((city, index) => (\n                    <Option key={index} value={city.name}>\n                      {city.name}\n                    </Option>\n                  ))}\n                </Select>\n              )}\n            </Form.Item>\n\n            <Form.Item label=\"District\">\n              {getFieldDecorator(\"ward\", {\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Town\">\n              {getFieldDecorator(\"addr1\", {\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Detailed address\">\n              {getFieldDecorator(\"addr2\", {\n              })(<Input />)}\n            </Form.Item>\n\n            <Form.Item label=\"Registration fee\">\n              {getFieldDecorator(\"register_price\", {\n                initialValue:0,               \n                rules: [\n                  {\n                    required: true,\n                    message: \"Please input your registration fee!\"\n                  },\n                  {\n                    pattern: new RegExp(\"^[0-9]*$\"),\n                    message: \"Input must be number and greater than zero.\"\n                  }\n                ]\n              })(<Input onBlur={this.onBlurChange}/>)}\n            </Form.Item>\n\n            <Form.Item label=\"Registration fee for members\">\n              {getFieldDecorator(\"second_register_price\", {\n                initialValue: 0,\n                rules: [\n                  {\n                    required: true,\n                    message: \"Please input your registration fee for members!\"\n                  },\n                  {\n                    pattern: new RegExp(\"^[0-9]*$\"),\n                    message: \"Input must be number and greater than zero.\"\n                  }\n                ]\n              })(<Input onBlur={this.onBlurChange}/>)}\n            </Form.Item>\n\n            <Form.Item label=\"Regular membership fee\">\n              {getFieldDecorator(\"other_shop_entry_fee\", {\n                initialValue: 0,\n                rules: [\n                  {\n                    required: true,\n                    message: \"Please input your regular membership fee!\"\n                  },\n                  {\n                    pattern: new RegExp(\"^[0-9]*$\"),\n                    message: \"Input must be number and greater than zero.\"\n                  }\n                ]\n              })(<Input onBlur={this.onBlurChange}/>)}\n            </Form.Item>\n\n            <div className=\"dp-flex-jf-center dp-flex\">\n              <Button\n                type=\"primary\"\n                htmlType=\"submit\"\n                onClick={this.handleSubmit}\n              >\n                Save\n              </Button>\n              <Link to=\"/shop\">\n                <Button>\n                  Back\n                </Button>\n              </Link>\n              </div>\n          </Form>\n        </Card>\n      </div>\n    );\n  }\n}\nexport default Form.create()(NewShop);\n"]},"metadata":{},"sourceType":"module"}