{"ast":null,"code":"import _toConsumableArray from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/thamnt/Downloads/shop-online/front-end/admin/src/routes/Product/ProductHistoryPage/index.js\";\nimport React, { Component } from \"react\";\nimport \"../../../styles/customerStyle/index.css\";\nimport { Row, Col, Form, Cascader, Table, Button, Card, DatePicker } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport CircularProgress from \"components/CircularProgress/index\";\nimport { searchProductHistory, listShop } from \"../../../service/handleRequest\";\nimport moment from \"moment\";\n\nvar ProductHistoryPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductHistoryPage, _Component);\n\n  function ProductHistoryPage(props) {\n    var _this;\n\n    _classCallCheck(this, ProductHistoryPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProductHistoryPage).call(this, props));\n    _this.columns = [{\n      title: \"Date\",\n      dataIndex: \"date\",\n      key: \"date\"\n    }, {\n      title: \"Id\",\n      dataIndex: \"id\",\n      key: \"id\"\n    }, {\n      title: \"Product Code\",\n      dataIndex: \"product_code\",\n      key: \"product_code\"\n    }, {\n      title: \"Product Name\",\n      dataIndex: \"product_name\",\n      key: \"product_name\"\n    }, {\n      title: \"Number\",\n      dataIndex: \"number\",\n      key: \"number\"\n    }, {\n      title: \"Type\",\n      dataIndex: \"type\",\n      key: \"type\"\n    }];\n    _this.formItemLayout = {\n      labelCol: {\n        sm: {\n          span: 8\n        }\n      },\n      wrapperCol: {\n        sm: {\n          span: 16\n        }\n      }\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        loader: true\n      });\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          var product_id = _this.props.match.params;\n          var data = {\n            date_start: values.date[0].format(\"YYYY-MM-DD\"),\n            date_end: values.date[1].format(\"YYYY-MM-DD\"),\n            shop_id: values.shop[0],\n            product_id: product_id.id\n          };\n          searchProductHistory(data).then(function (res) {\n            _this.setState({\n              searchProductHistory: res.data,\n              loader: false\n            });\n          });\n        }\n      });\n    };\n\n    _this.styleLoader = {\n      position: \"sticky\",\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      zIndex: \"2\",\n      background: \"#fff\"\n    };\n    var today = new Date();\n    moment(today.setDate(today.getDate() - 1)).format(\"YYYY-MM-DD\");\n    var date_end = moment(today.setDate(today.getDate() + 1)).format(\"YYYY-MM-DD\");\n    var date_start = moment(today.setDate(today.getDate() - 2)).format(\"YYYY-MM-DD\");\n    _this.state = {\n      loader: false,\n      searchProductHistory: [],\n      getShops: [],\n      date_start: date_start,\n      date_end: date_end,\n      shop_id: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(ProductHistoryPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.setState({\n        loader: true\n      });\n      var page = 1;\n      listShop(page).then(function (response) {\n        var data = response.data.data;\n        var getShops = data.map(function (getShop) {\n          return {\n            value: getShop.id,\n            label: getShop.shop_name\n          };\n        });\n\n        _this2.setState({\n          getShops: getShops\n        });\n      });\n      var product_id = this.props.match.params;\n      var data = {\n        date_start: this.state.date_start,\n        date_end: this.state.date_end,\n        shop_id: this.state.shop_id,\n        product_id: product_id.id\n      };\n      searchProductHistory(data).then(function (res) {\n        _this2.setState({\n          searchProductHistory: res.data,\n          loader: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var dateFormat = \"YYYY-MM-DD\";\n      var _this$state = this.state,\n          loader = _this$state.loader,\n          shops = _this$state.shops,\n          getShops = _this$state.getShops,\n          searchProductHistory = _this$state.searchProductHistory,\n          date_start = _this$state.date_start,\n          date_end = _this$state.date_end;\n      var RangePicker = DatePicker.RangePicker;\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"Goods Management\")), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 24,\n        className: \"posi-rel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, loader ? React.createElement(\"div\", {\n        className: \"gx-loader-view\",\n        style: this.styleLoader,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(CircularProgress, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      })) : null, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Form, Object.assign({\n        className: \"form-shape\"\n      }, this.formItemLayout, {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }), React.createElement(Form.Item, {\n        label: \"Date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, getFieldDecorator(\"date\", {\n        rules: [{\n          required: true,\n          message: \"Please input your date start!\"\n        }],\n        initialValue: [moment(date_start, dateFormat), moment(date_end, dateFormat)]\n      })(React.createElement(RangePicker, {\n        format: dateFormat,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Store Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, getFieldDecorator(\"shop\", {\n        initialValue: [\"\"]\n      })(React.createElement(Cascader, {\n        options: [{\n          value: \"\",\n          label: \"All\"\n        }].concat(_toConsumableArray(getShops)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"dp-flex-jf-center dp-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(Button, {\n        htmlType: \"submit\",\n        type: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Search\"), React.createElement(Link, {\n        to: \"/products\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(Button, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, \"Back\"))))))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 24,\n        className: \"posi-rel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(Table, {\n        columns: this.columns,\n        dataSource: searchProductHistory,\n        size: \"middle\",\n        pagination: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return ProductHistoryPage;\n}(Component);\n\nexport default Form.create()(ProductHistoryPage);","map":{"version":3,"sources":["/Users/thamnt/Downloads/shop-online/front-end/admin/src/routes/Product/ProductHistoryPage/index.js"],"names":["React","Component","Row","Col","Form","Cascader","Table","Button","Card","DatePicker","Link","CircularProgress","searchProductHistory","listShop","moment","ProductHistoryPage","props","columns","title","dataIndex","key","formItemLayout","labelCol","sm","span","wrapperCol","handleSubmit","e","preventDefault","setState","loader","form","validateFields","err","values","product_id","match","params","data","date_start","date","format","date_end","shop_id","shop","id","then","res","styleLoader","position","top","left","width","zIndex","background","today","Date","setDate","getDate","state","getShops","page","response","map","getShop","value","label","shop_name","dateFormat","shops","RangePicker","getFieldDecorator","rules","required","message","initialValue","onChange","create"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"../../../styles/customerStyle/index.css\";\nimport {\n  Row,\n  Col,\n  Form,\n  Cascader,\n  Table,\n  Button,\n  Card,\n  DatePicker\n} from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport CircularProgress from \"components/CircularProgress/index\";\nimport { searchProductHistory, listShop } from \"../../../service/handleRequest\";\nimport moment from \"moment\";\n\nclass ProductHistoryPage extends Component {\n  constructor(props) {\n    super(props);\n    const today = new Date();\n    moment(today.setDate(today.getDate() - 1)).format(\"YYYY-MM-DD\");\n\n    const date_end = moment(today.setDate(today.getDate() + 1)).format(\n      \"YYYY-MM-DD\"\n    );\n\n    const date_start = moment(today.setDate(today.getDate() - 2)).format(\n      \"YYYY-MM-DD\"\n    );\n\n    this.state = {\n      loader: false,\n      searchProductHistory: [],\n      getShops: [],\n      date_start: date_start,\n      date_end: date_end,\n      shop_id: \"\"\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ loader: true });\n    const page = 1;\n    listShop(page).then(response => {\n      var data = response.data.data;\n\n      const getShops = data.map(getShop => {\n        return {\n          value: getShop.id,\n          label: getShop.shop_name\n        };\n      });\n      this.setState({\n        getShops: getShops\n      });\n    });\n\n    const product_id = this.props.match.params;\n    const data = {\n      date_start: this.state.date_start,\n      date_end: this.state.date_end,\n      shop_id: this.state.shop_id,\n      product_id: product_id.id\n    };\n\n    searchProductHistory(data).then(res => {\n      this.setState({\n        searchProductHistory: res.data,\n        loader: false\n      });\n    });\n  }\n\n  columns = [\n    {\n      title: \"Date\",\n      dataIndex: \"date\",\n      key: \"date\"\n    },\n    {\n      title: \"Id\",\n      dataIndex: \"id\",\n      key: \"id\"\n    },\n    {\n      title: \"Product Code\",\n      dataIndex: \"product_code\",\n      key: \"product_code\"\n    },\n    {\n      title: \"Product Name\",\n      dataIndex: \"product_name\",\n      key: \"product_name\"\n    },\n    {\n      title: \"Number\",\n      dataIndex: \"number\",\n      key: \"number\"\n    },\n    {\n      title: \"Type\",\n      dataIndex: \"type\",\n      key: \"type\"\n    }\n  ];\n\n  formItemLayout = {\n    labelCol: {\n      sm: { span: 8 }\n    },\n    wrapperCol: {\n      sm: { span: 16 }\n    }\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.setState({\n      loader: true\n    });\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        const product_id = this.props.match.params;\n        const data = {\n          date_start: values.date[0].format(\"YYYY-MM-DD\"),\n          date_end: values.date[1].format(\"YYYY-MM-DD\"),\n          shop_id: values.shop[0],\n          product_id: product_id.id\n        };\n        searchProductHistory(data).then(res => {\n          this.setState({\n            searchProductHistory: res.data,\n            loader: false\n          });\n        });\n      }\n    });\n  };\n\n  styleLoader = {\n    position: \"sticky\",\n    top: 0,\n    left: 0,\n    width: \"100%\",\n    zIndex: \"2\",\n    background: \"#fff\"\n  };\n\n  render() {\n    const dateFormat = \"YYYY-MM-DD\";\n    const {\n      loader,\n      shops,\n      getShops,\n      searchProductHistory,\n      date_start,\n      date_end\n    } = this.state;\n    const { RangePicker } = DatePicker;\n    const { getFieldDecorator } = this.props.form;\n\n    return (\n      <div>\n        <div className=\"title-header\">\n          <h3 className=\"text-title\">Goods Management</h3>\n        </div>\n\n        <Row>\n          <Col span={24} className=\"posi-rel\">\n            {loader ? (\n              <div className=\"gx-loader-view\" style={this.styleLoader}>\n                <CircularProgress />\n              </div>\n            ) : null}\n            <Card>\n              <Form\n                className=\"form-shape\"\n                {...this.formItemLayout}\n                onSubmit={this.handleSubmit}\n              >\n                <Form.Item label=\"Date\">\n                  {getFieldDecorator(\"date\", {\n                    rules: [\n                      {\n                        required: true,\n                        message: \"Please input your date start!\"\n                      }\n                    ],\n                    initialValue: [\n                      moment(date_start, dateFormat),\n                      moment(date_end, dateFormat)\n                    ]\n                  })(\n                    <RangePicker format={dateFormat} onChange={this.onChange} />\n                  )}\n                </Form.Item>\n                <Form.Item label=\"Store Name\">\n                  {getFieldDecorator(\"shop\", {\n                    initialValue: [\"\"]\n                  })(\n                    <Cascader\n                      options={[{ value: \"\", label: \"All\" }, ...getShops]}\n                    />\n                  )}\n                </Form.Item>\n                <div className=\"dp-flex-jf-center dp-flex\">\n                  <Button htmlType=\"submit\" type=\"primary\">\n                    Search\n                  </Button>\n                  <Link to=\"/products\">\n                    <Button>Back</Button>\n                  </Link>\n                </div>\n              </Form>\n            </Card>\n          </Col>\n        </Row>\n\n        <Row>\n          <Col span={24} className=\"posi-rel\">\n            <Card>\n              <Table\n                columns={this.columns}\n                dataSource={searchProductHistory}\n                size=\"middle\"\n                pagination={false}\n              ></Table>\n            </Card>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default Form.create()(ProductHistoryPage);\n"]},"metadata":{},"sourceType":"module"}