{"ast":null,"code":"import _regeneratorRuntime from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/thamnt/Downloads/shop-online/front-end/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/thamnt/Downloads/shop-online/front-end/admin/src/routes/Rental/AddRentalPage/index.js\";\nimport React, { Component } from \"react\";\nimport { Row, Col, Form, Input, Cascader, Card, Button, notification } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport { updateRental, createRental, getListShop, getRental } from \"../../../service/handleRequest\";\nimport CircularProgress from \"components/CircularProgress/index\";\nimport \"../../../styles/customerStyle/index.css\";\n\nvar AddRentalPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddRentalPage, _Component);\n\n  function AddRentalPage(props) {\n    var _this;\n\n    _classCallCheck(this, AddRentalPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddRentalPage).call(this, props));\n\n    _this.openNotificationWithIcon = function (type, message) {\n      notification[type]({\n        message: message\n      });\n    };\n\n    _this.formItemLayout = {\n      labelCol: {\n        sm: {\n          span: 8\n        }\n      },\n      wrapperCol: {\n        sm: {\n          span: 16\n        }\n      }\n    };\n\n    _this.handleSubmit = function (e) {\n      var id = _this.props.match.params.id;\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          var obj = {\n            rental_name: values.nameRental,\n            rental_description: values.rentalDescription,\n            fee: values.fee,\n            shop_id: values.shop[0]\n          };\n          if (!id) _this.doCreateSubmit(obj);else _this.doUpdateSubmit(obj, id);\n        }\n      });\n    };\n\n    _this.renderInitShop = function (value) {\n      if (!value) return [];\n      return [value];\n    };\n\n    _this.state = {\n      rental: {\n        rentalName: \"\",\n        rentaldescription: \"\",\n        fee: \"\",\n        shopId: \"\"\n      },\n      shops: [],\n      loader: true\n    };\n    return _this;\n  }\n\n  _createClass(AddRentalPage, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var id;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                id = this.props.match.params.id;\n                getListShop.then(function (response) {\n                  var shops = response.data.map(function (shop) {\n                    return {\n                      value: shop.id,\n                      label: shop.shopName\n                    };\n                  });\n\n                  _this2.setState({\n                    shops: shops\n                  });\n\n                  if (!id) _this2.setState({\n                    loader: false\n                  });\n                }).catch(function (ex) {\n                  _this2.openNotificationWithIcon(\"error\", \"Server error\");\n                });\n\n                if (id) {\n                  _context.next = 4;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 4:\n                getRental(id).then(function (response) {\n                  var rental = {\n                    rentalName: response.data.data.attributes.rentalName,\n                    rentaldescription: response.data.data.attributes.rentalDescription,\n                    fee: response.data.data.attributes.fee,\n                    shopId: response.data.data.relationships[0].data.id\n                  };\n\n                  _this2.setState({\n                    rental: rental,\n                    loader: false\n                  });\n                }).catch(function (ex) {});\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"doUpdateSubmit\",\n    value: function () {\n      var _doUpdateSubmit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(obj, id) {\n        var _this3 = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                updateRental(obj, id).then(function (response) {\n                  _this3.openNotificationWithIcon(\"success\", \"Update rental success.\");\n\n                  _this3.props.history.replace(\"/rentals\");\n                }).catch(function (ex) {\n                  if (ex.response && ex.response.status === 422) {\n                    if (ex.response.data.errors.rental_name[0]) _this3.openNotificationWithIcon(\"error\", \"Shop name is exist.\");\n                  } else {\n                    _this3.openNotificationWithIcon(\"error\", \"Server error\");\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function doUpdateSubmit(_x, _x2) {\n        return _doUpdateSubmit.apply(this, arguments);\n      }\n\n      return doUpdateSubmit;\n    }()\n  }, {\n    key: \"doCreateSubmit\",\n    value: function () {\n      var _doCreateSubmit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(obj) {\n        var _this4 = this;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                createRental(obj).then(function (response) {\n                  _this4.openNotificationWithIcon(\"success\", \"Create rental success.\");\n\n                  _this4.props.history.replace(\"/rentals\");\n                }).catch(function (ex) {\n                  if (ex.response && ex.response.status === 422) {\n                    if (ex.response.data.errors.rental_name[0]) _this4.openNotificationWithIcon(\"error\", \"Shop name is exist.\");\n                  } else {\n                    _this4.openNotificationWithIcon(\"error\", \"Server error\");\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function doCreateSubmit(_x3) {\n        return _doCreateSubmit.apply(this, arguments);\n      }\n\n      return doCreateSubmit;\n    }()\n  }, {\n    key: \"renderTitleHeader\",\n    value: function renderTitleHeader() {\n      var id = this.props.match.params.id;\n      return id ? \"Update Rental\" : \"Create Rental\";\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      var _this$state = this.state,\n          shops = _this$state.shops,\n          rental = _this$state.rental,\n          loader = _this$state.loader;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, this.renderTitleHeader())), React.createElement(Row, {\n        type: \"flex\",\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 24,\n        className: \"pd-0 posi-rel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, loader ? React.createElement(\"div\", {\n        className: \"on-loader posi-absolute\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(CircularProgress, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      })) : null, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(Form, Object.assign({}, this.formItemLayout, {\n        onSubmit: this.handleSubmit,\n        className: \"form-shape\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }), React.createElement(Form.Item, {\n        label: \"Rental Service Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, getFieldDecorator(\"nameRental\", {\n        rules: [{\n          required: true,\n          message: \"Please input your Rental Service Name!\"\n        }],\n        initialValue: rental.rentalName\n      })(React.createElement(Input, {\n        placeholder: \"Rental Service Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, getFieldDecorator(\"rentalDescription\", {\n        rules: [{\n          required: true,\n          message: \"Please input your Description!\"\n        }],\n        initialValue: rental.rentaldescription\n      })(React.createElement(Input, {\n        placeholder: \"Description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Rental Service Rate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, getFieldDecorator(\"fee\", {\n        rules: [{\n          required: true,\n          message: \"Please input your Service Rate.\"\n        }, {\n          pattern: new RegExp(\"^[0-9]*$\"),\n          message: \"Input Service Rate must be number.\"\n        }],\n        initialValue: rental.fee\n      })(React.createElement(Input, {\n        placeholder: \"Price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"Store Name Avaliable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, getFieldDecorator(\"shop\", {\n        rules: [{\n          type: \"array\",\n          required: true,\n          message: \"Please select your Store Name Avaliable.\"\n        }],\n        initialValue: this.renderInitShop(rental.shopId)\n      })(React.createElement(Cascader, {\n        options: shops,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"dp-flex-jf-center dp-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"Save\"), React.createElement(Link, {\n        to: \"/rentals\",\n        className: \"ant-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, \"Back\")))))));\n    }\n  }]);\n\n  return AddRentalPage;\n}(Component);\n\nexport default Form.create()(AddRentalPage);","map":{"version":3,"sources":["/Users/thamnt/Downloads/shop-online/front-end/admin/src/routes/Rental/AddRentalPage/index.js"],"names":["React","Component","Row","Col","Form","Input","Cascader","Card","Button","notification","Link","updateRental","createRental","getListShop","getRental","CircularProgress","AddRentalPage","props","openNotificationWithIcon","type","message","formItemLayout","labelCol","sm","span","wrapperCol","handleSubmit","e","id","match","params","preventDefault","form","validateFields","err","values","obj","rental_name","nameRental","rental_description","rentalDescription","fee","shop_id","shop","doCreateSubmit","doUpdateSubmit","renderInitShop","value","state","rental","rentalName","rentaldescription","shopId","shops","loader","then","response","data","map","label","shopName","setState","catch","ex","attributes","relationships","history","replace","status","errors","getFieldDecorator","renderTitleHeader","rules","required","initialValue","pattern","RegExp","create"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Row,\n  Col,\n  Form,\n  Input,\n  Cascader,\n  Card,\n  Button,\n  notification\n} from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport {\n  updateRental,\n  createRental,\n  getListShop,\n  getRental\n} from \"../../../service/handleRequest\";\nimport CircularProgress from \"components/CircularProgress/index\";\nimport \"../../../styles/customerStyle/index.css\";\nclass AddRentalPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      rental: {\n        rentalName: \"\",\n        rentaldescription: \"\",\n        fee: \"\",\n        shopId: \"\"\n      },\n      shops: [],\n      loader: true\n    };\n  }\n\n  openNotificationWithIcon = (type, message) => {\n    notification[type]({\n      message: message\n    });\n  };\n\n  formItemLayout = {\n    labelCol: {\n      sm: { span: 8 }\n    },\n    wrapperCol: {\n      sm: { span: 16 }\n    }\n  };\n\n  async componentDidMount() {\n    const { id } = this.props.match.params;\n\n    getListShop\n      .then(response => {\n        const shops = response.data.map(shop => {\n          return {\n            value: shop.id,\n            label: shop.shopName\n          };\n        });\n\n        this.setState({ shops});\n\n        if(!id)\n          this.setState({loader: false});\n      })\n      .catch(ex => {\n        this.openNotificationWithIcon(\"error\", \"Server error\");\n      });\n\n    if (!id) {\n      return;\n    }\n\n    getRental(id)\n      .then(response => {\n        const rental = {\n          rentalName: response.data.data.attributes.rentalName,\n          rentaldescription: response.data.data.attributes.rentalDescription,\n          fee: response.data.data.attributes.fee,\n          shopId: response.data.data.relationships[0].data.id\n        };\n        this.setState({ rental, loader: false });\n      })\n      .catch(ex => {});\n  }\n\n  handleSubmit = e => {\n    const { id } = this.props.match.params;\n\n    e.preventDefault();\n\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        const obj = {\n          rental_name: values.nameRental,\n          rental_description: values.rentalDescription,\n          fee: values.fee,\n          shop_id: values.shop[0]\n        };\n        if (!id) this.doCreateSubmit(obj);\n        else this.doUpdateSubmit(obj, id);\n      }\n    });\n  };\n\n  async doUpdateSubmit(obj, id) {\n    updateRental(obj, id)\n      .then(response => {\n        this.openNotificationWithIcon(\"success\", \"Update rental success.\");\n        this.props.history.replace(`/rentals`);\n      })\n      .catch(ex => {\n        if (ex.response && ex.response.status === 422) {\n          if (ex.response.data.errors.rental_name[0])\n            this.openNotificationWithIcon(\"error\", \"Shop name is exist.\");\n        } else {\n          this.openNotificationWithIcon(\"error\", \"Server error\");\n        }\n      });\n  }\n\n  async doCreateSubmit(obj) {\n    createRental(obj)\n      .then(response => {\n        this.openNotificationWithIcon(\"success\", \"Create rental success.\");\n        this.props.history.replace(`/rentals`);\n      })\n      .catch(ex => {\n        if (ex.response && ex.response.status === 422) {\n          if (ex.response.data.errors.rental_name[0])\n            this.openNotificationWithIcon(\"error\", \"Shop name is exist.\");\n        } else {\n          this.openNotificationWithIcon(\"error\", \"Server error\");\n        }\n      });\n  }\n\n  renderInitShop = value => {\n    if (!value) return [];\n\n    return [value];\n  };\n\n  renderTitleHeader() {\n    const { id } = this.props.match.params;\n\n    return id ? \"Update Rental\" : \"Create Rental\";\n  }\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    const { shops, rental, loader } = this.state;\n\n    return (\n      <div>\n        <div className=\"title-header\">\n          <h3 className=\"text-title\">{this.renderTitleHeader()}</h3>\n        </div>\n\n        <Row type=\"flex\" justify=\"center\">\n          <Col span={24} className=\"pd-0 posi-rel\">\n          {loader ? (\n            <div className=\"on-loader posi-absolute\" >\n              <CircularProgress />\n            </div>\n          ) : null}\n            <Card>\n              <Form\n                {...this.formItemLayout}\n                onSubmit={this.handleSubmit}\n                className=\"form-shape\"\n              >\n                <Form.Item label=\"Rental Service Name\">\n                  {getFieldDecorator(\"nameRental\", {\n                    rules: [\n                      {\n                        required: true,\n                        message: \"Please input your Rental Service Name!\"\n                      }\n                    ],\n                    initialValue: rental.rentalName\n                  })(<Input placeholder=\"Rental Service Name\" />)}\n                </Form.Item>\n                <Form.Item label=\"Description\">\n                  {getFieldDecorator(\"rentalDescription\", {\n                    rules: [\n                      {\n                        required: true,\n                        message: \"Please input your Description!\"\n                      }\n                    ],\n                    initialValue: rental.rentaldescription\n                  })(<Input placeholder=\"Description\" />)}\n                </Form.Item>\n                <Form.Item label=\"Rental Service Rate\">\n                  {getFieldDecorator(\"fee\", {\n                    rules: [\n                      {\n                        required: true,\n                        message: \"Please input your Service Rate.\"\n                      },\n                      {\n                        pattern: new RegExp(\"^[0-9]*$\"),\n                        message: \"Input Service Rate must be number.\"\n                      }\n                    ],\n                    initialValue: rental.fee\n                  })(<Input placeholder=\"Price\" />)}\n                </Form.Item>\n                <Form.Item label=\"Store Name Avaliable\">\n                  {getFieldDecorator(\"shop\", {\n                    rules: [\n                      {\n                        type: \"array\",\n                        required: true,\n                        message: \"Please select your Store Name Avaliable.\"\n                      }\n                    ],\n                    initialValue: this.renderInitShop(rental.shopId)\n                  })(<Cascader options={shops} />)}\n                </Form.Item>\n                <div className=\"dp-flex-jf-center dp-flex\">\n                  <Button type=\"primary\" htmlType=\"submit\">\n                    Save\n                  </Button>\n                  <Link to=\"/rentals\" className=\"ant-btn\">\n                    Back\n                  </Link>\n                </div>\n              </Form>\n            </Card>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default Form.create()(AddRentalPage);\n"]},"metadata":{},"sourceType":"module"}